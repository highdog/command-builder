# beyerdynamic App 蓝牙协议规范

版本 1.9.5

*   [beyerdynamic App 蓝牙协议规范](#beyerdynamic-app-bluetooth-protocol-specification)
    *   [概述](#overview)
    *   [1\. Bluetooth 连接方式](#1-bluetooth-transports)
        *   [1.1. BLE 上的 GATT 要求](#11-gatt-over-ble-requirements)
        *   [1.2. RFCOMM 要求](#12-rfcomm-requirements)
        *   [1.3. iAP2 要求](#13-iap2-requirements)
    *   [2\. 协议定义](#2-protocol-definition)
        *   [2.1. RFCOMM 协议定义](#21-rfcomm-protocol-definition)
            *   [2.1.1. 消息头](#211-message-header)
                *   [2.1.1.1 同步字段](#2111-sof-flag)
                *   [2.1.1.2 版本](#2112-version)
                *   [2.1.1.3 标记](#2113-flags)
                *   [2.1.1.4 负载长度](#2114-payload-length)
                *   [2.1.1.5 厂商 ID](#2115-vendor-id)
                *   [2.1.1.6 功能 ID](#2116-feature-id)
                *   [2.1.1.7 数据包类型](#2117-packet-type)
                *   [2.1.1.8 命令 ID](#2118-command-id)
            *   [2.1.2. 消息载荷](#212-message-payload)
            *   [2.1.3. 校验和](#213-checksum)
        *   [2.2. BLE 协议定义中的 GATT](#22-gatt-over-ble-protocol-definition)
            *   [2.2.1. 消息头](#221-message-header)
                *   [2.2.1.1 厂商标识](#2211-vendor-id)
                *   [2.2.1.2 功能 ID](#2212-feature-id)
                *   [2.2.1.3 数据包类型](#2213-packet-type)
                *   [2.2.1.4 命令 ID](#2214-command-id)
        *   [2.3 QCC 平台协议定义](#23-protocol-definition-for-qcc-platform)
    *   [3\. 消息定义](#3-message-definition)
        *   [0x00 获取设备类型](#0x00-get-device-type)
        *   [0x19 获取设备 MAC 地址](#0x19-get-device-mac-address)
        *   [0x01 注册通知监听器](#0x01-register-notification-listeners)
        *   [获取序列号](#0x02-get-serial-number)
        *   [获取特性版本](#0x03-get-feature-version)
        *   [获取电池电量](#0x06-get-battery-level)
        *   [获取蓝牙 LED 配置](#0x07-get-bluetooth-led-configurations)
        *   [0x08 设置蓝牙 LED 配置](#0x08-set-bluetooth-led-configurations)
        *   [0x09 获取 LE 配置](#0x09-get-le-configurations)
        *   [0x0A 设置 LE 配置](#0x0A-set-le-configurations)
        *   [0x14 获取固件版本](#0x14-get-firmware-version)
        *   [0x15 获取耳塞颜色](#0x15-get-earbuds-color)
        *   [0x16 设置耳塞颜色](#0x16-set-earbuds-color)
        *   [0x17 获取外设状态](#0x17-get-peripheral-states)
        *   [0x41 获取剩余电池时间](#0x41-get-remaining-battery-time)
        *   [0x44 获取均衡器模式](#0x44-get-equalizer-mode)
            *   [均衡器模式 v1 载荷：](#equalizer-mode-v1-payload)
            *   [均衡器模式 v2 载荷：](#equalizer-mode-v2-payload)
        *   [0x45 设置均衡器模式](#0x45-set-equalizer-mode)
        *   [0x46 获取用户均衡器配置](#0x46-get-user-equalizer-configuration)
            *   [用户均衡器配置 v3 载荷：](#user-equalizer-configuration-v3-payload)
            *   [用户均衡器配置 v2 载荷：](#user-equalizer-configuration-v2-payload)
            *   [用户均衡器配置 v1 载荷：](#user-equalizer-configuration-v1-payload)
            *   [使用平台 SDK 进行 EQ 配置（Airoha, QCC）：](#using-platform-sdks-for-eq-configuration-airoha-qcc)
        *   [0x47 设置用户均衡器配置](#0x47-set-user-equalizer-configuration)
        *   [0x48 触发媒体按钮](#0x48-trigger-media-button)
        *   [0x49 播放状态](#0x49-play-status)
        *   [0x4A 获取设备名称](#0x4a-get-device-name)
        *   [0x4B 设置设备名称](#0x4b-set-device-name)
        *   [0x4C 获取自动关机时间](#0x4c-get-auto-shutdown-time)
        *   [0x4D 设置自动关机时间](#0x4d-set-auto-shutdown-time)
        *   [0x4E 获取选定的语音助手模式](#0x4e-get-selected-voice-assistant-mode)
        *   [0x4F 设置选定的语音助手模式](#0x4f-set-selected-voice-assistant-mode)
        *   [0x59 获取自定义按键](#0x59-get-custom-keys)
            *   [自定义按键 v2 载荷：](#custom-keys-v2-payload)
            *   [自定义键 v1 载荷：](#custom-keys-v1-payload)
        *   [0x5A 设置自定义键](#0x5a-set-custom-keys)
        *   [0x5B 获取提示语言](#0x5b-get-prompt-language)
        *   [0x5C 设置提示语言](#0x5c-set-prompt-language)
        *   [0x5E 获取提示音状态](#0x5e-get-prompt-sound-state)
        *   [0x5F 设置提示音状态](#0x5f-set-prompt-sound-state)
        *   [0x66 获取启用的语音提示](#0x66-get-enabled-voice-prompts)
        *   [0x67 设置启用的语音提示](#0x67-set-enabled-voice-prompts)
        *   [0x57 获取语音提示音量级别](#0x57-get-voice-prompts-volume-level)
        *   [0x58 设置语音提示音量级别](#0x58-set-voice-prompts-volume-level)
        *   [0x60 获取主动降噪模式](#0x60-get-anc-mode)
        *   [0x61 设置主动降噪模式](#0x61-set-anc-mode)
        *   [0x30 获取非自适应 ANC 级别](#0x30-get-non-adaptive-anc-level)
        *   [0x31 设置非自适应 ANC 级别](#0x31-set-non-adaptive-anc-level)
        *   [0x32 获取 ANC 透明度增益](#0x32-get-anc-transparency-gain)
        *   [0x33 设置 ANC 透明度增益](#0x33-set-anc-transparency-gain)
        *   [0x34 获取 ANC 风噪声检测模式](#0x34-get-anc-wind-noise-detection-mode)
        *   [0x35 设置 ANC 风噪声检测模式](#0x35-set-anc-wind-noise-detection-mode)
        *   [0x36 获取自适应 ANC 级别](#0x36-get-adaptive-anc-level)
        *   [0x37 获取 ANC 开启模式](#0x37-get-anc-on-mode)
        *   [0x38 打开 ANC 模式](#0x38-set-anc-on-mode)
        *   [0x62 获取低延迟模式](#0x62-get-low-latency-mode)
        *   [0x63 设置低延迟模式](#0x63-set-low-latency-mode)
        *   [0x64 获取佩戴检测配置](#0x64-get-wearing-detection-configuration)
        *   [0x65 设置佩戴检测配置](#0x65-set-wearing-detection-configuration)
        *   [0x68 获取 LED 亮度](#0x68-get-led-brightness)
        *   [0x69 设置 LED 亮度](#0x69-set-led-brightness)
        *   [0x70 获取侧音模式](#0x70-get-sidetone-mode)
        *   [0x71 设置侧音模式](#0x71-set-sidetone-mode)
        *   [0x72 获取侧音增益](#0x72-get-sidetone-gain)
        *   [0x73 设置侧音增益](#0x73-set-sidetone-gain)
        *   [0x7C 获取杜比全景声配置](#0x7c-get-dolby-atmos-config)
        *   [0x7D 设置杜比全景声配置](#0x7d-set-dolby-atmos-config)
        *   [0x7E 获取音频编解码器配置](#0x7e-get-audio-codecs-configurations)
        *   [0x7F 设置音频编解码器配置](#0x7f-set-audio-codecs-configurations)
        *   [0x5D 厂商恢复出厂设置](#0x5d-factory-reset)
        *   [0x20 获取使用统计](#0x20-get-usage-statistics)
        *   [0x21 重置使用统计](#0x21-reset-usage-statistics)
        *   [错误载荷](#error-payload)
    *   [4\. 空中固件更新 (FOTA)](#4-firmware-over-the-air-updates-fota)
    *   [5\. 示例包流程](#5-example-package-flow)
        *   [5.1. GetBatteryLevel 命令](#51-getbatterylevel-command)
        *   [5.2. GetBatteryLevel 更改通知](#52-getbatterylevel-changed-notification)
        *   [5.3. GetBatteryLevel 耳机断开连接通知](#53-getbatterylevel-earbud-disconnected-notification)
    *   [6\. 统计项类型](#6-statistics-item-types)
        *   [0x00 总运行时间](#0x00-total-runtime)
        *   [0x01 电源开启事件](#0x01-power-on-events)
        *   [0x02 音乐播放时间](#0x02-music-playback-time)
        *   [0x03 通话时间](#0x03-voice-call-time)
        *   [0x04 错误计数总计](#0x04-error-counter-total)
        *   [0x05 接受的通话计数](#0x05-accepted-calls-counter)
        *   [0x06 按钮按下计数](#0x06-button-presses-counter)
        *   [0x07 体积级别 生命周期 平均值](#0x07-volume-level-lifetime-average)
        *   [0x08 多点模式 使用时间](#0x08-time-multipoint-mode-used)
        *   [0x09 ANC 模式 使用时间](#0x09-time-anc-mode-used)
        *   [0x0A 低延迟模式 使用时间](#0x0a-time-low-latency-mode-used)
        *   [错误信息](#0x0b-error-information)
    *   [7\. 测试](#7-testing)
        *   [Android](#android)
            *   [概述](#overview-1)
            *   [连接设备](#connecting-to-a-device)
            *   [测试命令](#testing-commands)
            *   [OTA 更新](#fota)
            *   [提取应用日志](#extracting-app-logs)
            *   [通过 OTA 方式将文件复制到主用户界面应用](#copying-ota-files-to-main-user-facing-app)

## 概述

本文件是 beyerdynamic 移动应用与蓝牙耳机之间的通信协议。

本文件的目的是定义一个可以在不同耳机型号之间重用的通用协议，而无需为每款耳塞型号重新发明轮子。

重要提示！！！标记为必填的 Messages 必须在每款 beyerdynamic 耳机型号中实现。

## 1\. 蓝牙传输

该协议支持三种蓝牙传输方式：

*   GATT 通过蓝牙低功耗（BLE）
*   Bluetooth RFCOMM（仅限 Android）
*   Apple MFI iAP2（仅限 iOS）

### 1.1. GATT over BLE 要求

如果 beyerdynamic 耳机选择通过 BLE 与应用通信，则必须支持以下 GATT 服务和特征：

QCC 平台：

| 描述 | UUID | 属性 | 权限 | 笔记 |
| --- | --- | --- | --- | --- |
| 广告服务 | 7BF0 |  |  |  |
| 拜耳动力服务 | 54943f52-bdfd-48a0-855a-3b5471a6b4ab |  |  |  |
| 命令特性 | 00001101-D102-11E1-9B23-00025B00A5A5 | NA | NA | Gaia SDK 命令通道 |
| 响应特性 | 00001102-D102-11E1-9B23-00025B00A5A5 | NA | NA | Gaia SDK 响应通道 |
| 数据特征 | 00001103-D102-11E1-9B23-00025B00A5A5 | NA | NA | Gaia SDK 数据通道 |

命令特征、响应特征和数据特征由 Gaia SDK 定义。

Airoha 平台：

| 描述 | UUID | 属性 | 权限 | 备注 |
| --- | --- | --- | --- | --- |
| 广告服务 | 7BF0 |  |  |  |
| beyerdynamic 自定义命令服务 | 54943f52-bdfd-48a0-855a-3b5471a6b4ab |  |  |  |
| 自定义命令特征 | 78DB4F91-DDF7-4A83-92E9-3CE422C89975 | 写 | 加密 | beyerdynamic 自定义命令数据从移动电话传输到配件设备 |
| 自定义命令特征 | 78DB4F92-DDF7-4A83-92E9-3CE422C89975 | 读取，通知 | 加密 | beyerdynamic 自定义命令数据从配件设备传输到移动电话 |
| OTA 服务 | 54943f52-bdfd-48a0-855b-3b5471a6b4ab |  |  |  |
| OTA 特性 | 43484152-2DAB-3241-6972-6F6861424C45 | NA | NA | 通过移动设备向配件设备传输 OTA 数据 |
| OTA 特性 | 43484152-2DAB-3141-6972-6F6861424C45 | NA | NA | 通过配件设备到移动电话的 OTA 数据传输 |

OTA 特性由 Airoha SDK 定义。

Realtek 平台：

| 描述 | UUID | 属性 | 权限 | 备注 |
| --- | --- | --- | --- | --- |
| 广告宣传服务 | 7BF0 |  |  |  |
| beyerdynamic 自定义命令服务 | 54943f52-bdfd-48a0-855a-3b5471a6b4ab |  |  |  |
| 自定义命令特征 | 78DB4F91-DDF7-4A83-92E9-3CE422C89975 | 写入 | 加密 | beyerdynamic 移动电话到配件设备的自定义命令数据传输 |
| 自定义命令特征 | 78DB4F92-DDF7-4A83-92E9-3CE422C89975 | 读取，通知 | 加密 | beyerdynamic 从配件设备到移动电话的自定义命令数据传输 |

BES 平台：

| 描述 | UUID | 属性 | 权限 | 备注 |
| --- | --- | --- | --- | --- |
| 广告宣传服务 | 7BF0 |  |  |  |
| beyerdynamic 自定义命令服务 | 54943f52-bdfd-48a0-855a-3b5471a6b4ab |  |  |  |
| 自定义命令特征 | 78DB4F91-DDF7-4A83-92E9-3CE422C89975 | 写入 | 加密 | beyerdynamic 自定义命令数据传输从移动电话到配件设备 |
| 自定义命令特征 | 78DB4F92-DDF7-4A83-92E9-3CE422C89975 | 读取，通知 | 加密 | beyerdynamic 自定义命令数据从配件设备传输到移动电话 |
| OTA 命令特征 | 78DB4F93-DDF7-4A83-92E9-3CE422C89975 | 写，通知 | NA | 配件设备与移动电话之间的 BES OTA 命令数据传输 |

设备应在 kCBAdvDataManufacturerData 的第 6 字节到第 11 字节范围内广播其 MAC 地址。应用程序将检查该 MAC 地址以确定该设备是否为拜耳动态设备。此 MAC 地址应与 A2DP 报告的 MAC 地址相同。请始终向应用程序报告相同的 MAC 地址，例如：即使在主从切换后，报告的 MAC 地址也不应改变。

以下是一个示例。红色下划线的部分是 MAC 地址：

![drawing](assets/BLE-MAC-Address_Example.png)

重要提示！！！如果设备未通过 A2DP 连接到移动电话，则设备不应开始 BLE 广播。 %%

> TODO: 我们应该考虑使用蓝牙 SIG 提供的 16 位广告服务 UUID

### 1.2. RFCOMM 要求

使用 RFCOMM 进行数据交换的贝洱动态设备应当支持以下之一的 RFCOMM 通道 UUID：

*   如果你的设备使用 GAIA 库： `54943f52-bd0d-48a0-855a-3b5471a6b4ab`
*   否则: `54943f52-bdfd-48a0-855a-3b5471a6b4ab`

此 UUID 用于移动应用与设备之间的主要通信通道，以更改设置、获取电池电量等。

重要提示: 有时，当 Android 在短时间内发送多个消息时，RFCOMM 消息可能会被分组到一个数据包中。在这种情况下，设备将接收到一个包含多个消息的字节数组，每个消息都有自己的头部、负载等。设备应能够处理这种情况，并将消息彼此分离。使用负载长度来识别消息的结束位置。

OTA 库的 UUID:

*   武器固件 OTA 库: `00001101-0000-1000-8000-00805f9b34fb`
*   Airoha SDK: `7b46e8de-5a7e-4512-be0d-863aeaa3312b`
*   GAIA / QCC: `54943f52-bd0d-48a0-855a-3b5471a6b4ab`
*   Realtek: `60ea72e7-3bb8-4035-8d66-6272120f1bac`
*   BES: `54943f52-bdfd-48a0-855a-3b5471a6b4ab`

### 1.3. iAP2 要求

Beyerdynamic 设备必须获得 MFi 认证并实现 iAP 协议，以便在 iOS 上使用 RFCOMM。设备应使用外部附件（EA）协议名称 `com.beyerdynamic.headphones` 。

对于无法将包标识符等于协议名称的平台，协议名称可以更改为 `com.beyerdynamic.headphones.deviceName` 。

## 2\. 协议定义

以下为移动应用与设备之间通信的协议定义：

*   [RFCOMM 协议定义](#21-rfcomm-protocol-definition)
*   [BLE 上的 GATT 协议定义](#22-gatt-over-ble-protocol-definition)

该协议定义为可以在移动应用和设备之间发送的一系列消息。

请注意，对于某些平台，我们可能会使用单独的格式。例如，对于 QCC 平台，我们使用 GAIA 客户端。更多详情请参见 2.3. QCC 平台协议定义。

### 2.1. RFCOMM 协议定义

RFCOMM beyerdynamic 消息由 3 部分组成：

1.  头部（8-9 字节）
2.  可选负载（长度可变）
3.  可选校验和（1 字节）

注意：有时当 Android 在短时间内发送多条消息时，RFCOMM 消息可能会被分组并在单个数据包中传输。在这种情况下，设备将接收到一个包含多条消息的字节数组，每条消息都有自己的头部、负载和校验和。设备应该能够处理这种情况，并将消息彼此分离。使用负载长度和起始标志（SOF）来识别一条消息的结束和另一条消息的开始。

#### 2.1.1. 消息头

消息头由 8 或 9 字节组成，用于标识和解码消息。每个字段以大端序存储。

| 参数 | 大小 | 描述 |
| --- | --- | --- |
| SOF 标志 | 8 位 | 这是一个恒定的 0xFF 值。用于标识新消息的开始。 |
| 版本 | 8 位 | 协议的版本。当前版本是 4。 |
| 标志位 | 8 位 | 用于交换元数据的位字段。 |
| 负载长度 | 8 位或 16 位 | 消息负载的字节数。8 位或 16 位长度由一个标志控制。 |
| 供应商 ID | 16 位 | 暂定值为 0x2E50。 |
| 特性 ID | 7 位 | 暂定值 0x11。 |
| 数据包类型 | 2 位 | 无论是命令、响应、通知等 |
| 命令 ID | 7 位 | 特定消息命令的标识符（例如：GetBatteryLevel）。 |

##### 2.1.1.1 SOF 标志

类型：uint8

每条消息都应以 0xFF 开始。

如果消息不以 0xFF 开头，则跳过直到找到 0xFF 的字节。消息将从找到的 0xFF 开始。

##### 2.1.1.2 版本

类型：uint8

这主要用于将来的兼容性。目前仅支持版本 `4` 。

##### 2.1.1.3 标志位

类型：uint8 字节掩码

位从最低有效位开始计数。

该位的值为 `1` 表示该位被设置。 `0` 表示未设置。

| 位索引 | 名称 | 描述 |
| --- | --- | --- |
| 0 | CHECKSUM | 当帧包含校验和时，标志位被设置。 |
| 1 | LENGTH\_EXTENSION | 当帧使用长度扩展时设置标志：使用两个字节表示负载长度。如果没有设置此标志，则负载长度应使用一个字节表示。 |
| 2-7 |  | 保留 |

示例：

*   `0b00000000` - 未设置任何标志。
*   `0b00000001` - CHECKSUM 标志已设置。
*   `0b00000010` - LENGTH\_EXTENSION 标志已设置。
*   `0b00000011` - CHECKSUM 和 LENGTH\_EXTENSION 标志均已设置。

##### 2.1.1.4 数据载荷长度

类型: uint8 或 uint16

默认使用 uint8。但如果设置了 LENGTH\_EXTENSION 标志，则使用 uint16，此时该头部参数占用 2 字节。

此数据包中负载的大小。以字节为单位测量。

负载长度可以为零，这意味着此数据包的负载为空。

##### 2.1.1.5 厂商 ID

类型: uint16

目前是一个常量 0x2E50。

##### 2.1.1.6 特性 ID

类型: 7 位

目前这是一个常量 0x11。

建议一次读取 2 个字节。然后将第一个字节的最高 7 位作为特征 ID。第一个字节的最低位和第二个字节的最高位作为包类型。第二个字节的其余 7 位最低位作为命令 ID。7+2+7 = 16 位 = 2 个字节。

##### 2.1.1.7 包类型

类型: 2 位

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | COMMAND | 从移动设备向设备发送一条命令是预期的。 |
| 0x01 | NOTIFICATION | 从设备向移动设备发送一条通知作为自发消息是预期的。 |
| 0x02 | RESPONSE | 预期会从设备向移动端发送一个响应，作为对命令成功回应的回答。 |
| 0x03 | ERROR | 预期会从设备向移动端发送一个错误，作为对命令不成功回应的回答。 |

建议每次读取 2 字节。将第一个字节的最高 7 位作为 Feature ID。第一个字节的最低位和第二个字节的最高位作为 Packet Type。第二个字节的其余 7 位作为 Command ID。7+2+7 = 16 位 = 2 字节。

参见 5. 示例数据包流程，了解每种数据包类型的具体用法。

##### 2.1.1.8 Command ID

类型：7 位

指示在移动设备与设备之间发送的命令或通知的类型。

参见 3. 消息定义，了解可能的命令 ID 值。

建议一次读取 2 个字节。然后将第一个字节的最高 7 位作为 Feature ID。第一个字节的最低位和第二个字节的最高位作为 Packet Type。第二个字节的最低 7 位作为 Command ID。7+2+7 = 16 位 = 2 个字节。

#### 2.1.2. 消息负载

类型：二进制（可变长度）

每条消息应包含一个长度等于 payload 长度字段中设置的长度的负载。

payload 长度可以为零，这意味着该数据包的负载为空。

请参见 3. 消息定义，了解每个 Command ID 允许的负载格式。

#### 2.1.3. 校验和

类型: 不存在或 uint8

只有在设置了校验和标志时，校验和才应存在。

校验和是通过对报头+负载中的每个字节进行位级异或运算计算得出的。报头+负载是指数据包中除最后一个校验和字节外的所有字节。

如果校验和不匹配，应忽略该数据包。

```java
if (hasChecksum) {
    result[frameLength - 1] = calculateChecksum(result, frameLength - 1);
}

private byte calculateChecksum(byte[] source, int length) {
    byte check = 0;
    for (int i = 0; i < length; i++) {
        check ^= source[i];
    }
    return check;
}
```

大多数耳塞不需要校验和。主要在设备存在可靠性问题时需要校验和，例如蓝牙传输问题、意外同时发送多个蓝牙数据包、缺少字节等。如果您设备需要校验和，请告知我们。

设备→移动的数据包中始终会检查校验和（如果存在的话）。

### 2.2. BLE 协议定义中的 GATT

BLE beyerdynamic 消息由两部分组成：

1.  头部（4 字节）
2.  可选负载（长度可变）

#### 2.2.1. 消息头部

消息头由 4 个字节组成，用于识别和解码消息。

| 参数 | 大小 | 描述 |
| --- | --- | --- |
| 供应商 ID | 16 位 | 暂定为 0x2E50。 |
| 功能 ID | 7 位 | 暂定常量 0x11。 |
| 包类型 | 2 位 | 无论是命令、响应、通知等 |
| Command ID | 7 位 | 特定消息命令的标识符（例如：GetBatteryLevel）。 |

##### 2.2.1.1 厂商 ID

类型: uint16

目前是一个常量 0x2E50。

##### 2.2.1.2 特性 ID

类型: 7 位

目前这是一个常量 0x11。

##### 2.2.1.3 数据包类型

类型: 2 位

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | COMMAND | 从移动设备向设备发送一条命令是预期的。 |
| 0x01 | NOTIFICATION | 从设备向移动设备发送一条通知是预期的自发消息。 |
| 0x02 | RESPONSE | 响应应从设备发送到移动侧，作为对命令的成功回答。 |
| 0x03 | ERROR | 错误应从设备发送到移动侧，作为对命令的不成功回答。 |

##### 2.2.1.4 命令 ID

类型: 7 位

表示移动设备与设备之间发送的命令或通知的类型。

参见 3. 消息定义，了解可能的命令 ID 值。

### QCC 平台协议定义 2.3

我们使用 GAIA 客户端进行 QCC 平台的开发。请使用 GAIA 的协议进行 QCC 平台的开发，但请使用与本文件 2.1. RFCOMM 协议定义和 2.2. 蓝牙 BLE GATT 协议定义中定义的相同供应商 ID、功能 ID、命令 ID 和负载格式。

固件还应支持 GAIA 内部使用的关键命令，例如 GET\_API\_VERSION。

## 3\. 消息定义

### 0x00 获取设备类型

命令 ID: 0x00

此消息用于获取该设备型号类型，用于识别设备型号。应用程序将使用此信息来显示/隐藏不支持的设备功能。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空 | 获取设备类型。移动设备→device |
| RESPONSE | 设备类型响应负载 | 成功响应：COMMAND。设备→移动设备 |
| ERROR | 错误载荷 | COMMAND 的错误响应。设备→移动设备 |

设备类型响应载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 设备类型枚举 |

设备类型枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | VERIO\_100 |  |
| 0x01 | VERIO\_200 |  |
| 0x02 | VERIO\_300 |  |
| 0x03 | AVENTHO\_300 |  |

### 0x19 获取设备 MAC 地址

命令 ID: 0x19

此消息允许获取设备的 MAC 地址。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空的 | 获取 MAC 地址。Mobile→device |
| RESPONSE | MAC 地址响应负载 | COMMAND 成功响应。Device→mobile |
| ERROR | 错误负载 | COMMAND 的错误响应：设备→移动设备 |

耳塞的 MAC 地址响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-5 | uint（48 位） | 左耳塞的 MAC 地址，以数值形式表示。如何转换 🔗 |
| 6-11 | uint（48 位） | 右耳塞的 MAC 地址（数字表示）。如何转换 🔗 |

耳机的 MAC 地址响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-5 | uint（48 位） | 以数值形式表示的 MAC 地址。如何转换 🔗 |

### 0x01 注册通知监听器

命令 ID: 0x01

此消息允许通知设备注册通知监听器（例如电池电量、播放状态等）。主要针对使用 GAIA 客户端的 QCC 平台。

如果您的固件平台不需要此命令，请在连接时自动注册监听器。如有需要，请告知我们您平台是否需要此命令。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 注册监听器请求负载 | 注册监听器以接收通知。移动设备→设备 |
| RESPONSE | 空 | COMMAND. 设备→移动设备 响应成功 |
| ERROR | 错误负载 | COMMAND. 设备→移动设备 响应错误 |

注册监听器请求负载：常量 `0x11`

### 0x02 获取序列号

命令 ID：0x02

此消息允许获取设备序列号。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空的 | 获取序列号。Mobile→device |
| RESPONSE | 序列号响应负载 | COMMAND 成功响应。Device→mobile |
| ERROR | 错误响应负载 | COMMAND 的错误响应：设备→移动设备 |

耳塞的序列号响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-15 | UTF-8 字符串 | 左耳塞的序列号。如果左耳塞离线，则为全零。 |
| 16-31 | UTF-8 字符串 | 右耳塞的序列号。如果右耳塞离线，则为全零。 |

耳机的序列号响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-15 | UTF-8 字符串 | 耳机的序列号。 |

### 0x03 获取特征版本

命令 ID: 0x03

此消息用于检查设备的功能集版本。此命令旨在在发布后计划添加新功能时使用。移动应用可以使用此命令检查设备是否支持新功能。

| 数据包类型 | 负载 | 笔记 |
| --- | --- | --- |
| COMMAND | 空 | 获取功能版本。Mobile→device |
| RESPONSE | 功能版本响应负载 | 成功响应 COMMAND。设备→移动设备 |
| ERROR | 错误载荷 | COMMAND 的错误响应。设备→移动设备 |

功能版本响应载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 设备的功能版本 |

初始版本应从 0 开始。如果添加了新功能，请递增版本号。请告诉我们每个功能版本增加了/更改了什么。

### 0x06 获取电池电量

**强制要求**

命令 ID: 0x06

此消息用于获取设备电池电量。

| 数据包类型 | 负载 | 笔记 |
| --- | --- | --- |
| COMMAND | 空 | 获取电池电量。移动设备→设备 |
| RESPONSE | 电池电量响应负载 | COMMAND 的成功响应。设备→移动设备 |
| ERROR | 错误载荷 | COMMAND 的错误响应。设备→移动设备 |
| NOTIFICATION | 电池电量响应载荷 | 设备→当电池电量变化或耳塞离线/在线时发送移动通知。 |

耳塞的电池电量响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 左耳塞的电池电量。范围在 0 到 100 之间，或左耳塞离线时为 0xFF。 |
| 1 | uint8 | 右耳塞的电池电量。0 到 100 之间，或右耳塞离线时为 0xFF。 |
| 2 | uint8 | 充电盒的电池电量。0 到 100 之间，或充电盒离线时为 0xFF。 |

耳机的电池电量响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 耳机的电池电量。0 到 100 之间。 |

注意：手机端使用 GetBatteryLevel 命令来确定连接的是哪副耳塞。确保在耳塞断开连接或重新连接时发送包含电池电量的通知消息。

参见 5. 示例数据流，了解 GetBatteryLevel 命令的使用示例。

### 0x07 获取蓝牙 LED 配置

命令 ID: 0x07

默认值: On

此消息可用于获取设备当前的蓝牙 LED 配置。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前蓝牙指示灯配置。Mobile→device |
| RESPONSE | Bluetooth led 配置数据包。 | COMMAND 命令成功响应。设备→手机 |
| ERROR | 错误数据包 | COMMAND 命令错误响应。设备→手机 |
| NOTIFICATION | 蓝牙 LED 配置数据载荷。 | 设备→手机通知：当蓝牙 LED 配置在外置应用之外更改时，例如通过耳机上的触摸手势更改。 |

蓝牙 LED 配置数据载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 蓝牙 LED 配置枚举值。 |

蓝牙 LED 配置枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 第 0 章 | 已连接 | 蓝牙指示灯已开启。 |
| 0x01 | 关 | 蓝牙指示灯已关闭。 |

### 0x08 设置蓝牙指示灯配置

命令 ID: 0x08

此消息用于设置设备当前的蓝牙 LED 配置。

| 报文类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 蓝牙 LED 配置负载。 | 设置蓝牙 LED 配置。移动设备→设备 |
| RESPONSE | 蓝牙 LED 配置负载。 | 蓝牙 LED 配置设置成功。响应负载是实际应用的数据。设备→移动设备 |
| ERROR | 错误负载 | COMMAND. 设备→移动设备的错误响应 |

请参见 0x07 获取蓝牙 LED 配置以获取蓝牙 LED 负载规范。

### 0x09 获取 LE 配置

命令 ID: 0x09

默认值:

*   GOOGLE\_FAST\_PAIR: ON
*   LE\_AUDIO: OFF

此消息用于获取设备上的当前 LE 配置。这代表设备可能启用的配置，例如启用 Google 快速配对或禁用 LE 音频。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前 LE 配置。Mobile→device |
| RESPONSE | LE 配置负载。 | COMMAND 操作成功响应。Device→mobile |
| ERROR | 错误负载 | COMMAND 的错误响应：设备→移动 |

LE 配置负载：

| 位索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint 1 位 | GOOGLE\_FAST\_PAIR 启用状态枚举 |
| 1 | uint 1 位 | LE\_AUDIO 启用状态枚举 |
| 000000 | uint 6 位 | 占位符 |

LE 配置状态值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x0 | ON |  |
| 0x1 | OFF |  |

如果设备不支持指定的配置，应响应 OFF。

示例：

考虑二进制负载 `00000001` 。在此负载中，从左到右：

*   `000000__` - 占位符
*   `______0_` - LE 音频（关闭）
*   `_______1` - Google 快速配对（开启）

### 0x0A 设置 LE 配置

命令 ID: 0x0A

此消息允许设置设备当前的 LE 配置。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | LE 配置负载。 | 设置 LE 配置。Mobile→设备 |
| RESPONSE | LE 配置负载。 | LE 配置设置成功。响应负载是实际应用的数据。设备→移动设备 |
| ERROR | 错误负载 | 命令的错误响应。设备→移动设备 |

查看 0x09 获取 LE 配置 获取 LE 配置负载规范。

### 0x14 获取固件版本

**必选**

命令 ID：0x14

此消息用于获取设备固件版本。

| 报文类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空 | 获取固件版本。移动设备→设备 |
| RESPONSE | 固件版本响应负载 | COMMAND 操作成功响应。设备→移动设备 |
| ERROR | 错误负载 | COMMAND 的错误响应：设备→移动设备 |

耳塞的固件版本响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 左耳塞的主要固件版本。或如果左耳塞离线，则为 0x00。 |
| 1 | uint8 | 左耳塞的次要固件版本。如果左耳塞离线，则为 0x00。 |
| 2 | uint8 | 左耳塞的补丁固件版本。如果左耳塞离线，则为 0x00。 |
| 3 | uint8 | 右耳塞的主要固件版本。如果右耳塞离线，则为 0x00。 |
| 4 | uint8 | 右耳塞的次要固件版本。如果右耳塞离线，则为 0x00。 |
| 5 | uint8 | 右耳塞的固件版本。或 0x00 如果右耳塞离线。 |
| 6 | uint8 | 充电盒的主要固件版本。或 0x00 如果充电盒离线。 |
| 7 | uint8 | 充电盒的次要固件版本。如果充电盒离线，则为 0x00。 |
| 8 | uint8 | 充电盒的补丁固件版本。如果充电盒离线，则为 0x00。 |

耳机的固件版本响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 头戴设备的主要固件版本。 |
| 1 | uint8 | 头戴设备的次要固件版本。 |
| 2 | uint8 | 更新耳机的固件版本。 |

每个固件版本由三个数字表示：主版本、次版本和修订版本。如果耳机离线，固件版本应为 0.0.0。耳机应返回实际的数字，而不是包含 ASCII 数字的 ASCII 字符串。

耳机示例：

考虑载荷 `0x01 0x06 0x01 0x01 0x06 0x02 0x01 0x00 0x00` 。在本例中，固件版本为：

*   对于左耳塞 - `1.6.1`
*   对于右耳塞 - `1.6.2`
*   对于充电盒 - `1.0.0`

对于负载 `0x01 0x06 0x01 0x00 0x00 0x00 0x00 0x00 0x00` ：

*   对于左耳塞 - `1.6.1`
*   右耳塞离线或无固件版本。
*   充电盒离线或无固件版本。

### 0x15 获取耳机颜色

**强制**

命令 ID: 0x15

此消息允许应用程序获取设备的颜色。

| 包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空的 | 获取耳机颜色。Mobile→device |
| RESPONSE | 耳机颜色载荷 | COMMAND 成功响应。Device→mobile |
| ERROR | 错误载荷 | COMMAND 的错误响应 Device→mobile |

耳塞颜色载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 耳塞的颜色 |
| 1 | uint8 | 在线耳机指示 |

耳机值的颜色：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | Color1 | 耳塞为 Color1 |
| 第 1 章 | Color2 | 耳塞是 Color2 |
| 第 2 章 | Color3 | earbuds is Color3 |
| 0x03 | Color4 | 耳塞是 Color4 |

每个 ColorX 值取决于设备型号，应单独协商确定。

在线耳塞指示器：

| 值 | 描述 |
| --- | --- |
| 0x01 | 左耳塞在线，右耳塞离线 |
| 0x02 | 右耳塞在线，左耳塞离线 |
| 0x03 | 两个耳塞均在线 |

### 0x16 设置耳塞颜色

命令 ID: 0x16

此消息允许应用程序更改设备的颜色。

此命令仅用于测试目的，并且仅在连接调试应用程序中可用。生产贝洱动态应用程序不使用此命令。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 设置耳塞颜色请求负载 | 设置耳塞颜色。移动设备→设备。该命令仅在设备重新启动后应用。 |
| RESPONSE | 设置耳塞颜色响应载荷 | 指示是否成功应用该命令。设备→手机 |
| ERROR | 错误响应载荷 | 命令的错误响应。设备→手机 |

设置耳塞颜色请求负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 耳机的颜色 |

请参阅 0x15 获取耳机颜色 以了解耳机颜色的值。这些值会被重复使用。

设置耳机颜色响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 结果状态 |

结果状态值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | FAILED | 左右耳机操作均失败 |
| 0x01 | LEFT | 左耳机设置成功 |
| 0x02 | RIGHT | 右耳机设置成功 |
| 0x03 | BOTH | 左右耳机均设置成功 |

### 0x17 获取外围设备状态

命令 ID：0x17

此消息允许获取不同设备外围设备或扩展的连接状态。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空的 | 获取外围设备状态。Mobile→device |
| RESPONSE | 外围设备状态响应负载 | COMMAND 命令成功响应。Device→mobile。应包含所有支持的外围设备，即使它们处于离线状态。 |
| ERROR | 错误响应负载 | COMMAND 的错误响应：Device→mobile |
| NOTIFICATION | 外设状态响应负载 | 当外设状态发生变化时，Device→mobile 的通知。仅包含状态发生变化的外设。 |

外设状态响应负载由一个项数组组成：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | 外设项 | 项 1 |
| 1 | 外设项 | 项 2 |
| ... | ... | ... |

每个外设项都由一个位掩码组成：

| 位索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-5 | uint 5 位 | 外设类型枚举。 |
| 6-7 | uint 2 位 | 外设状态枚举。 |

外设类型枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | DONGLE |  |

外围状态枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | DISCONNECTED |  |
| 0x01 | CONNECTED |  |
| 0x02 |  | 保留字段 |
| 0x03 |  | 保留 |

响应负载应包含设备支持的所有从设备类型。通知负载只能包含状态发生变化的从设备。

示例：

考虑二进制负载 `00000001 00000100` 。在这个例子中，有以下数组项：

*   `00000001` - item 1
*   `00000100` - item 2

对于 item 1：

*   `000000__` - 外设类型枚举值为 0x00 ( `DONGLE` )。
*   `______01` - 外设状态枚举值为 0x01 ( `CONNECTED` )。

对于第 2 项：

*   `000001__` - 外设类型枚举值为 0x01（不存在，仅为示例）。
*   `______00` - 周边状态枚举值为 0x00 ( `DISCONNECTED` )。

### 0x41 获取剩余电池时间

命令 ID: 0x41

此消息允许获取剩余电池时间。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空的 | 获取剩余电池时间。Mobile→device |
| RESPONSE | 剩余电池时间响应负载 | COMMAND 操作成功响应。Device→mobile |
| ERROR | 错误响应负载 | COMMAND 的错误响应：Device→mobile |
| NOTIFICATION | 剩余电池时间响应负载 | 当剩余电池寿命发生变化或耳塞离线/上线时，设备向手机发送通知。 |

耳塞的剩余电池时间响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 剩余小时数（左耳塞）。或 0xFF 如果左耳塞离线。 |
| 1 | uint8 | 剩余分钟数（左耳塞）。介于 0 和 59 之间。或 0xFF 如果左耳塞离线。 |
| 2 | uint8 | 右耳塞剩余电量小时数。或 0xFF 如果右耳塞离线。 |
| 3 | uint8 | 右耳塞剩余电量分钟数。范围在 0 到 59 之间。或 0xFF 如果右耳塞离线。 |

耳机剩余电池时间响应负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 剩余小时。 |
| 1 | uint8 | 剩余分钟。范围在 0 到 59 之间。 |

如果剩余电池时间是例如 3 小时 10 分钟，应用将显示为 `3h` 。如果剩余 3 小时 40 分钟，应用将显示为 `3.5h` 。如果电池时间少于 30 分钟，应用将显示精确的剩余分钟数。这在应用端完成，所以耳塞只需返回精确的时间即可。

耳塞示例：

考虑负载 `0x07 0x1E 0x07 0x00` 。（0x1E 在十进制中等于 30。）在这个示例中，剩余电池时间为：

*   左耳塞 - 7 小时 30 分钟。
*   右耳塞 - 7 小时 0 分钟。

对于载荷 `0xFF 0xFF 0x00 0x34` ：（0x34 十进制为 52。）在这个例子中，剩余电池时间为：

*   左耳塞离线或无法连接。
*   对于右耳塞 - 0 小时 52 分钟。应用将显示为 `0.5h` 。

### 0x44 获取均衡器模式

命令 ID: 0x44

默认值: 关

此消息允许获取当前均衡器模式。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空 | 获取当前均衡器模式。Mobile→设备 |
| RESPONSE | 等化器模式响应负载 | COMMAND. 设备→移动设备成功响应 |
| ERROR | 错误负载 | COMMAND. 设备→移动设备错误响应 |

##### 等化器模式 v1 载荷：

此版本不支持为音乐、游戏和 ANC 使用不同的等化器模式。

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 当前均衡器模式枚举。 |

均衡器模式枚举：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | 关 | 均衡器已关闭。 |
| 0x01 | 摇滚 |  |
| 第 02 章 | 爵士 |  |
| 第 03 章 | 古典 |  |
| 第 4 章 | 弹出 |  |
| 第 5 章 | 用户 | 用户自定义预设。用户均衡器配置用作均衡器配置。 |
| 0x06 | 低音增强 |  |
| 0x07 | 顺滑高音 |  |
| 0x08 | 响度 |  |
| 0x09 | 中立 |  |
| 0x0A | 对话 |  |
| 0x0B | 射击 |  |
| 0x0C | 大逃杀 |  |
| 0x0D | 冒险 |  |
| 0x0E | 竞速 |  |
| 0x0F | 策略 |  |

##### 等化器模式 v2 载荷：

此版本支持为音乐、游戏和 ANC 使用不同的等化器模式。

载荷由一个数组组成：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-2 | 均衡器模式项 | 项 1 |
| 3-5 | 均衡器模式项 | 项 2 |
| ... | ... | ... |

每个均衡器模式项：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | EQ 类型枚举。 |
| 1-2 | 16 位无符号整数 | 当前均衡器模式枚举。 |

EQ 类型枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | 音乐 |  |
| 0x01 | 游戏 |  |
| 0x02 | ANC |  |

音乐 EQ 均衡器模式枚举值：

请参见音乐 EQ 枚举值 v1 载荷。它被重用。

游戏 EQ 均衡器模式枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | 关闭 | 均衡器已关闭。 |
| 0x01 | 用户 | 自定义用户创建的预设。使用用户的均衡器配置作为均衡器配置。 |
| 其他 |  | 请参阅 Gaming EQ 值以获取其他值。 |

ANC EQ 均衡器模式枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | 关闭 | 均衡器已关闭。 |
| TODO | TODO | 请定义 ANC 均衡器模式的值。 |

响应负载应仅包含设备支持的均衡器类型。

### 0x45 设置均衡器模式

命令 ID: 0x45

此消息允许更改当前均衡器模式。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 等化器模式载荷 | 设置当前等化器模式。Mobile→device |
| RESPONSE | 等化器模式载荷 | 均衡器模式设置成功。响应负载是实际应用的均衡器模式。设备→手机 |
| ERROR | 错误负载 | 命令的错误响应。设备→手机 |

参见 0x44 获取均衡器模式 以获取均衡器模式负载的规范。

使用获取均衡器模式时所使用的相同均衡器模式载荷版本来设置均衡器模式。

payload v2 说明：COMMAND 请求中只能包含打算更改的均衡器类型。在这种情况下，RESPONSE 载荷应仅包含通过 COMMAND 请求更改的均衡器类型。

### 0x46 获取用户均衡器配置

命令 ID：0x46

默认值：\[0, 0, ..., 0\] - 平坦

此消息允许更改当前均衡器模式。

| 数据包类型 | 负载 | 笔记 |
| --- | --- | --- |
| COMMAND | 空 | 获取当前均衡器模式。Mobile→设备 |
| RESPONSE | 用户均衡器配置负载 | COMMAND 的响应成功。设备→移动设备 |
| ERROR | 错误载荷 | COMMAND 的响应出错。设备→移动设备 |

用户均衡配置载荷有两种版本。请告知您的设备支持哪种版本的载荷。v2 支持浮点数，而 v1 仅支持整数。v3 支持针对音乐、游戏和 ANC 的不同用户均衡设置。

在 Airoha 和 QCC 平台上，也可以使用平台 SDK 进行 EQ 配置，但如果可能，我们建议使用 Beyerdynamic 协议命令进行 EQ 配置。

##### 用户均衡器配置 v3 载荷：

该载荷由一个可变长度项数组组成：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 到 S | 用户 EQ 配置项 | 项 1 |
| (S+1) 至 K | 用户 EQ 配置项 | 项 2 |
| (K+1) 至 M | 用户 EQ 配置项 | 项 3 |
| ... | ... | ... |

每个用户 EQ 配置项：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | EQ 类型枚举。 |
| 1-2 | sint16 | 第一频段增益乘以 60。 |
| 3-4 | sint16 | 第二频带的增益乘以 60。 |
| ... | ... | ... |
| (N\*2-1)..(N\*2) | sint16 | 第 N 频带的增益乘以 60。 |

EQ 类型枚举值：

请参见 Equalizer 模式 v2 载荷中的 EQ 类型枚举值，这些值在此被重用。

带数（N）是设备特定的。对于每种设备型号，其在应用和固件两侧都是硬编码的，并且需要单独协商。带数（N）可以因 EQ 类型而异。

增益是一个 16 位带符号数。序列化值是增益（以分贝为单位）的 60 倍。例如，增益为+9.6 dB 的值用序列化值 576（0x0240，9.6×60）表示。

响应负载应仅包含设备支持的 EQ 类型。

##### 用户均衡配置 v2 负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0..1 | sint16 | 第一频段增益乘以 60。 |
| 2..3 | sint16 | 第二频带的增益乘以 60。 |
| ... | ... | ... |
| (N\*2-2)..(N\*2-1) | sint16 | 第 N 频带的增益乘以 60。 |

增益是一个 16 位带符号数。序列化值是增益（单位为分贝）的 60 倍。例如，+9.6 dB 的增益用序列化值 576（0x0240，9.6×60）表示。

##### 用户均衡器配置 v1 载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | sint8 | 第一频带的增益。 |
| 1 | sint8 | 第二频带的增益。 |
| ... | ... | ... |
| N-1 | sint8 | 第 N 个频带的增益。 |

##### 使用平台 SDK 进行 EQ 配置（Airoha, QCC）：

建议使用拜耳动态协议命令进行均衡器配置。但如果无法支持，可以使用平台的平台 SDK 进行均衡器配置。如果无法支持拜耳动态的均衡器配置协议，请告知移动团队。

0x44 获取均衡器模式和 0x45 设置均衡器模式命令仍应用于在这些平台上更改均衡器模式。

关于 Airoha 平台的 SPP 注意事项：Android 应用将通过拜耳动态的 SPP 连接（ `54943f52-bdfd-48a0-855a-3b5471a6b4ab` UUID）发送平台均衡器命令。这意味着固件将通过同一个 SPP 连接接收拜耳动态协议命令和平台均衡器命令。固件需要在同一 SPP 连接上处理这两种类型的命令。这是因为大多数平台不支持同时使用多个 SPP 连接。

### 0x47 设置用户均衡器配置

命令 ID: 0x47

此消息允许更改当前用户的均衡器配置。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 用户均衡器配置负载 | 设置当前用户均衡器配置。移动→设备 |
| RESPONSE | 用户均衡器配置负载 | 均衡器配置设置成功。响应负载是实际应用的均衡器配置。设备→移动设备 |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→移动设备 |

请参阅 0x46 获取用户均衡器配置以获取用户均衡器配置负载规范。0x47 设置用户均衡器配置应使用与 0x46 获取用户均衡器配置相同的负载版本。如果您使用平台的 SDK 进行均衡器配置，则无需实现此命令。

注意事项（payload v3）：COMMAND 请求中只能包含打算更改的 EQ 类型。在这种情况下，RESPONSE payload 应仅包含与 COMMAND 请求一起更改的 EQ 类型。

### 0x48 触发媒体按钮

命令 ID：0x48

此消息允许触发耳机向手机操作系统发送媒体命令。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 触发媒体按钮负载 | 触发媒体按钮。Mobile→device |
| RESPONSE | 空 | COMMAND 响应成功。Device→mobile |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→移动 |

触发媒体按钮负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 媒体按钮 ID。 |

媒体按钮 ID：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | PLAY\_PAUSE | 在手机上暂停或恢复音乐。 |
| 0x01 | PREVIOUS\_SONG | 跳到上一首歌曲。 |
| 0x02 | NEXT\_SONG | 跳过下一首歌。 |

### 0x49 播放状态

命令 ID: 0x49

此消息可检查是否正在从手机向耳塞播放音乐。

| 包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空的。 | 触发媒体按钮。Mobile→device |
| RESPONSE | 播放状态数据包。 | COMMAND 操作成功响应。Device→mobile |
| ERROR | 错误数据包 | COMMAND 的错误响应 Device→mobile |
| NOTIFICATION | 播放状态负载 | 播放状态改变时，设备→移动的通知。 |

播放状态负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 播放状态枚举。 |

播放状态枚举：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | PLAYING | 正在播放一些音乐。 |
| 0x01 | PAUSED | 没有播放音乐。 |

### 0x4A 获取设备名称

**必填**

命令 ID: 0x4A

默认值：设备出厂时报告给操作系统的蓝牙名称。

此消息允许获取当前设备名称。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前设备名称。Mobile→device |
| RESPONSE | 设备名称负载 | 成功响应：COMMAND。设备→移动设备 |
| ERROR | 错误载荷 | COMMAND 的错误响应。设备→移动设备 |

设备名称载荷：UTF-8 可变长度字符串。不超过 31 个字符。仅包含实际名称，不包含任何空字符（0x00 或\\0）。

### 0x4B 设置设备名称

**强制**

命令 ID: 0x4B

此消息允许更改当前设备名称。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 设备名称负载 | 设置当前设备名称。Mobile→device |
| RESPONSE | 设备名称负载 | 设备名称设置成功。响应负载是实际应用的名称。Device→mobile |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→移动设备 |

请参见 0x4A 获取设备名称以获取设备名称负载规范。

### 0x4C 获取自动关机时间

命令 ID: 0x4C

默认值：0（从不）

此消息允许获取当前设备自动关机时间。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前设备自动关机时间。Mobile→device |
| RESPONSE | 自动关机时间负载。 | COMMAND 的成功响应。设备→移动设备 |
| ERROR | 错误载荷 | COMMAND 的错误响应。设备→移动设备 |

自动关机时间载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 或 uint16 | 空闲关闭时间（分钟，范围：0..360；0 表示“从不”） |

如果负载为 1 字节，则值限制为 uint8，范围为 0..255 分钟；如果负载为 2 字节，则值为 uint16，范围为 0..360 分钟。

必须支持 uint8。如果设备不支持超过 255 分钟，则可选支持 uint16。

### 0x4D 设置自动关闭时间

命令 ID: 0x4D

此消息允许更改当前设备的自动关机时间。

| 数据包类型 | 载荷 | 笔记 |
| --- | --- | --- |
| COMMAND | 自动关机时间负载。 | 设置设备关机时间。Mobile→设备 |
| RESPONSE | 自动关机时间负载。 | 设备关机时间设置成功。响应负载是实际应用的数据。Device→mobile |
| ERROR | 错误负载 | 命令的错误响应。Device→mobile |

请参见 0x4C 获取自动关机时间 以获取关机时间负载的规范。

### 选择的语音助手模式

命令 ID: 0x4E

默认值: DEFAULT

此消息可用于获取当前的语音助手模式。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前语音助手模式。Mobile→device |
| RESPONSE | 语音助手模式负载。 | COMMAND 请求成功响应。Device→mobile |
| ERROR | 错误负载 | COMMAND 的错误响应 |

语音助手模式负载

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 语音助手模式枚举 |

语音助手模式枚举:

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | DEFAULT | OS 助手（Google Assistant, Siri） |
| 0x01 | NONE | 未选择语音助手 |

### 0x4F 设置选定的语音助手模式

命令 ID: 0x4F

此消息允许更改当前语音助手模式。

| 数据包类型 | 载荷 | 笔记 |
| --- | --- | --- |
| COMMAND | 语音助手模式负载。 | 设置语音助手模式。移动→设备 |
| RESPONSE | 语音助手模式负载。 | 语音助手模式设置成功。响应负载是实际应用的数据。设备→手机 |
| ERROR | 错误负载 | 命令的错误响应。设备→手机 |

请参见 0x4E 获取选定的语音助手模式 以获取语音助手模式负载规范。

### 0x59 获取自定义键

命令 ID: 0x59

默认值：应根据设备协商确定。

此消息允许获取当前的自定义键状态。自定义键允许用户更改每个按钮手势（按下或长按）的功能。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前自定义键状态。Mobile→device |
| RESPONSE | 自定义键载荷。 | COMMAND 操作成功响应。Device→mobile |
| ERROR | 错误载荷 | COMMAND 的错误响应：设备→移动设备 |

自定义键负载有两种版本。请告知您的设备支持哪种版本的负载。v2 版本支持更多的操作和触发条件，并且优先使用。

##### 自定义键 v2 负载：

自定义键负载由一个数组组成：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-1 | 自定义键项 | 项 1 |
| 2-3 | 自定义键项 | 项 2 |
| ... | ... | ... |

每个自定义键项：

| 位索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-2 | uint 3 位 | 按钮位置。通常在耳塞侧。 |
| 3-7 | 5 位无符号整数 | 按钮触发类型。 |
| 8-15 | 8 位无符号整数 | 按钮操作。 |

耳机的按钮位置值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | LEFT | 左耳塞或侧面 |
| 0x01 | RIGHT | 右耳塞或侧边 |

耳机按钮位置值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | MFB | 多功能按钮，主按钮 |
| 0x01 | 音量+ | 音量加按钮 |
| 0x02 | 音量- | 音量减按钮 |

按钮触发类型值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | SINGLE\_TAP | 单击 |
| 0x01 | DOUBLE\_TAP | 双击 |
| 0x02 | TRIPLE\_TAP | 三击 |
| 0x03 | LONG\_PRESS | 单击并长按 |
| 0x04 | SINGLE\_THEN\_LONG\_PRESS | 单击，然后长按 |
| 0x05 | DOUBLE\_THEN\_LONG\_PRESS | 双击，然后长按 |
| 0x06 | FOUR\_TAP | 四次点击 |

按钮动作值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | NONE | 什么也不做。 |
| 0x01 | PLAY\_PAUSE | 在手机上暂停或恢复音乐。 |
| 0x02 | NEXT\_SONG | 跳过到下一首歌。 |
| 0x03 | PREVIOUS\_SONG | 跳过到上一首歌。 |
| 0x04 | VOICE\_ASSISTANT | 触发语音助手。 |
| 0x05 | VOLUME\_UP | 增大音量 1 级。 |
| 0x06 | VOLUME\_DOWN | 减小音量 1 级。 |
| 0x07 | SWITCH\_ANC\_MODE | 切换到下一 ANC 模式。 |
| 0x08 | SWITCH\_TRANSPARENCY\_MODE | 切换到下一个透明模式。 |
| 0x09 | SWITCH\_GAMING\_MODE | 切换到下一个游戏模式。 |

按钮位置加上按钮触发类型唯一地标识一个按钮。设备应仅发送其支持的按钮位置加上按钮触发类型。不支持对同一个按钮位置加上按钮触发类型发送多个按钮动作。

每种按钮支持哪些按钮操作，以及哪些按钮和触发器可用，应根据设备进行约定。

以耳塞为例：

考虑二进制负载 `00000000 00000001 00000011 00000110 00100000 00000001 00100011 00000101` 。在这个负载中，从左到右：

*   `00000000 00000001` - 自定义键项 1。
*   `00000011 00000110` - 自定义按键项 2。
*   `00100000 00000001` - 自定义按键项 3。
*   `00100011 00000101` - 自定义按键项 4。

对于自定义按键项 1：

*   `000_____ ________` - 自定义按键项 1 位置（0x00，LEFT）。
*   `___00000 ________` - 自定义按键项 1 触发类型（0x00，SINGLE\_TAP）。
*   `________ 00000001` - 自定义按键项 1 动作（0x01，PLAY\_PAUSE）。

对于自定义按键项 2：

*   `000_____ ________` - 自定义按键项 2 位置（0x00，LEFT）。
*   `___00011 ________` - 自定义按键项 2 触发类型（0x03，长按）。
*   `________ 00000110` - 自定义按键项 2 动作（0x06，音量减）。

对于自定义按键项 3：

*   `001_____ ________` - 自定义按键项 3 位置（0x01，右侧）。
*   `___00000 ________` - 自定义按键项 3 触发类型（0x00，单击）。
*   `________ 00000001` - 自定义按键项 3 动作（0x01，播放/暂停）。

对于自定义按键项 4：

*   `001_____ ________` - 自定义按键项 4 位置（0x01，右侧）。
*   `___00011 ________` - 自定义按键项 4 触发类型（0x03，长按）。
*   `________ 00000101` - 自定义按键项 4 动作（0x05，音量增大）。

##### 自定义按键 v1 载荷：

耳塞的自定义键载荷：

| 位索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | 4 位无符号整数 | 左耳塞单击操作。或 0xFF 如果左耳塞离线。 |
| 4-7 | 4 位无符号整数 | 左耳塞长按操作。或 0xFF 如果左耳塞离线。 |
| 8-11 | 4 位无符号整数 | 左耳塞双击操作。或 0xFF 如果左耳塞离线。 |
| 12-15 | 4 位无符号整数 | 左耳塞三击操作。或 0xFF 如果左耳塞离线。 |
| 16-19 | 4 位无符号整数 | 右耳塞单击操作。或 0xFF 如果右耳塞离线。 |
| 20-23 | 4 位无符号整数 | 右耳塞长按操作。或 0xFF 如果右耳塞离线。 |
| 24-27 | 4 位无符号整数 | 右耳塞双击操作。或 0xFF 如果右耳塞离线。 |
| 28-31 | 4 位无符号整数 | 右耳塞三击操作。或 0xFF 如果右耳塞离线。 |

耳机的自定义键负载：

| 位索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | 4 位无符号整数 | 单击操作。 |
| 4-7 | 4 位无符号整数 | 长按操作。 |
| 8-11 | 4 位无符号整数 | 双击操作。 |
| 12-15 | 4 位无符号整数 | 三击操作。 |

单击操作枚举：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | PLAY\_PAUSE | 在手机上暂停或恢复音乐。 |
| 0x01 | NONE | 不做任何操作。 |

长按动作枚举：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | VOICE\_ASSISTANT | 触发语音助手。 |
| 0x01 | NONE | 不做任何事情。 |
| 0x02 | VOLUME\_UP | 音量增大。 |
| 0x03 | VOLUME\_DOWN | 音量减小。 |

双击操作枚举：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | NEXT\_SONG | 跳过下一首歌。 |
| 0x01 | PLAY\_PAUSE | 在手机上暂停或恢复音乐。 %% |
| 0x02 | PREVIOUS\_SONG | 跳过上一首歌。 |
| 0x03 | NONE | 不做任何操作。 |
| 0x04 | VOICE\_ASSISTANT | 触发语音助手。 |
| 0x05 | SWITCH\_ANC\_MODE | 切换 ANC 模式，切换顺序按照 ANC 模式枚举值循环。 |

三击操作枚举：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | PREVIOUS\_SONG | 跳过上一首歌。 |
| 0x01 | PLAY\_PAUSE | 暂停或继续播放手机上的音乐。 %% |
| 0x02 | NEXT\_SONG | 跳过下一首歌。 |
| 0x03 | NONE | 不做任何操作。 |
| 0x04 | VOICE\_ASSISTANT | 触发语音助手。 |
| 0x05 | SWITCH\_ANC\_MODE | 切换 ANC 模式，切换顺序按照 ANC 模式枚举值循环。 |

每种点击/按压支持的操作应在设备层面达成一致。

示例：

考虑二进制负载 `00000011 00100100 00010010 00000101` 。在此负载中从左至右：

*   `0000` - 左耳塞单击操作（0x00，播放/暂停）。
*   `0011` - 左耳塞长按动作（0x03，音量减小）。
*   `0010` - 左耳塞双击动作（0x02，上一首歌曲）。
*   `0100` - 左耳塞三击动作（0x04，语音助手）。
*   `0001` - 右耳塞单击动作（0x01，无操作）。
*   `0010` - 右耳塞长按动作（0x02，音量增大）。
*   `0000` - 右耳塞双击动作（0x00，下一曲）。
*   `0101` - 右耳塞三击动作（0x05，切换主动降噪模式）。

### 0x5A 设置自定义按键

Command ID: 0x5A

此消息允许设置当前自定义按键状态。自定义按键允许用户更改每个按键按下或持续按下的功能。

| 数据包类型 | 负载 | 笔记 |
| --- | --- | --- |
| COMMAND | 自定义键负载。 | 设置自定义键状态。移动→设备 |
| RESPONSE | 自定义键负载。 | 自定义键状态设置成功。响应负载是实际应用的数据。Device→mobile |
| ERROR | 错误负载 | COMMAND 的错误响应。Device→mobile |

请参阅 0x59 获取自定义键以获取自定义键负载规范。设置自定义键时应使用获取自定义键时使用的相同负载版本。

### 0x5B 获取提示语言

命令 ID: 0x5B

默认值: ENGLISH

此消息用于获取设备当前的语音提示语言。

| 包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前提示语言。Mobile→device |
| RESPONSE | 提示语言载荷。 | COMMAND 指令成功响应。Device→mobile |
| ERROR | 错误载荷 | 错误响应：COMMAND。设备→移动 |

提示语言载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 提示语言枚举值。 |

提示语言枚举：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x01 | CHINESE |  |
| 0x02 | ENGLISH |  |
| 0x03 | GERMAN |  |

### 0x5c 设置提示语言

命令 ID: 0x5c

此消息用于设置设备当前的语音提示语言。

| 报文类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 发送提示语言载荷。 | 设置提示语言。Mobile→device |
| RESPONSE | 发送提示语言载荷。 | 设置提示语言成功。响应载荷是实际应用的数据。Device→mobile |
| ERROR | 错误负载 | COMMAND 命令的错误响应，设备→移动设备 |

请参见 0x5B 获取提示语言，以获取提示语言负载的规范。

### 0x5E 获取提示音状态

命令 ID: 0x5E

默认值: ON

此消息可获取蜂鸣功能的当前开/关状态。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前提示音状态。Mobile→设备 |
| RESPONSE | 提示状态载荷 | COMMAND. 设备→移动设备成功响应 |
| ERROR | 错误载荷 | COMMAND. 设备→移动设备错误响应 |

提示状态载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 提示状态枚举值。 |

提示状态枚举：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | ON |  |
| 0x01 | OFF |  |

### 0x5F 设置提示音状态

命令 ID: 0x5F

此消息允许设置当前的蜂鸣功能的开启/关闭状态。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 提示状态载荷。 | 设置提示状态。Mobile→device |
| RESPONSE | 触发状态载荷。 | 状态设置成功。响应载荷是实际应用的数据。设备→移动设备 |
| ERROR | 错误载荷 | 命令的错误响应。设备→移动设备 |

查看 0x5E 获取提示音状态以获取提示状态负载规范。

### 0x66 获取启用的语音提示

命令 ID：0x66

默认值：所有提示均启用。

此消息用于获取设备启用的语音提示。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 语音提示批次索引 | 获取启用的语音提示。Mobile→device |
| RESPONSE | 启用的语音提示负载。 | COMMAND 操作成功响应。Device→mobile |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→移动设备 |

语音提示批次索引：

由于某些平台对 BLE 包大小有限制，此值可用于将大包拆分成多个批次。

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | 索引 0 |  |
| 0x01 | 索引 1 |  |
| 0x02 | 索引 2 |  |

启用语音提示负载：

| 位索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-7 | 8 位无符号整数 | 此语音提示批次的索引 |
| 8-13 | 6 位无符号整数 | 第一提示类型 ID |
| 14-15 | uint 2 位 | 第一提示类型启用状态枚举 |
| 16-21 | uint 6 位 | 第二提示类型标识 |
| 22-23 | uint 2 位 | 第二提示类型使能状态枚举 |
| ... | ... | ... |
| (N-1)\*8 至 (N-1)\*8+5 | 6 位无符号整数 | 第 N 种提示类型的 ID |
| (N-1)\*8+6 到(N-1)\*8+7 | 2 位无符号整数 | 第 N 种提示类型的启用状态枚举 |

位索引从左到右进行计数（如果以二进制形式查看）。

如果设备的语音提示不多，只会使用索引 0。每个设备的索引数量需要协商确定。如果您需要超过一个索引，请告知我们。

启用状态枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | ON |  |
| 第 1 章 | OFF |  |
| 第 2 章 |  | 保留 |
| 第 3 章 |  | 保留 |

提示类型 ID 有两种版本。v1 版本更为具体，可以单独切换每个提示。v2 版本更为通用，可以切换提示组。

提示类型 ID（v1，具体）：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | POWER\_OFF |  |
| 0x01 | POWER\_ON |  |
| 0x02 | BATTERY\_LOW |  |
| 0x03 | ANC\_ON |  |
| 0x04 | PASS\_THROUGH | 透明模式 |
| 0x05 | ANC\_OFF |  |
| 0x06 | PAIRING | 进入配对模式 |
| 0x07 | CONNECTED | 连接建立 |
| 0x08 | VOLUME\_UP\_MAX | 在按下“音量加”按钮时，音量已达到最大级别 |
| 0x09 | VOLUME\_DOWN\_MIN | 按下“音量减”按钮时，音量已达到最小值 |
| 0x0A | RINGTONE |  |
| 0x0B | SINGLE\_TAP | 按钮按下反馈 |
| 0x0C | DOUBLE\_TAP | 按钮按下反馈 |
| 0x0D | TRIPLE\_TAP | 按钮按下反馈 |
| 0x0E | EAR\_CONNECTED |  |
| 0x0F | DOUBLE\_PRESS\_AND\_HOLD | 按钮按下反馈 |
| 0x10 | EAR\_DISCONNECTED |  |
| 第 11 章 | FOUR\_TAP | 按钮按下反馈 |
|  |  |  |

提示类型 ID（v2，通用）：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x01 | POWER\_ON\_OFF | 设备开机或关机 |
| 0x02 | BATTERY\_STATE | 与电池相关的内容。包括电池电量、充电状态、“电量低”等。 |
| 0x03 | BLUETOOTH\_CONNECTION | 进入配对模式、配对成功、与蓝牙设备连接/断开连接、配对失败、多点连接等。 |
| 0x04 | ANC | ANC 状态变化，透明模式 |
| 0x05 | AUDIO\_CODECS | A2DP 使用 AAC/aptX 编码 |
| 0x06 | CONNECTION | 连接建立，断开连接。替代 BLUETOOTH\_CONNECTION。 |
| 0x07 | TRANSPARENCY\_MODE | 透明状态变化。如果未支持 ANC，则替代 ANC。 %% |

请告知您的设备支持哪种提示类型 ID 版本。所有与设备的通信应使用相同的语音提示 ID 版本。

示例（提示类型 ID v1）：

考虑二进制负载 `00000000 00000001 00000101 00001001 00001100` 。在此负载中，从左至右：

*   `00000000` - 索引
*   `00000001` - 提示 0 内容
*   `00000101` - 提示 1 内容
*   `00001001` - 提示 2 内容
*   `00001100` - 提示 3 内容

提示 0 内容：

*   `000000__` - 提示 0 类型（关机）
*   `______01` - 提示 0 状态（关闭）

提示 1 内容：

*   `000001__` - 提示 1 类型（开机）
*   `______01` - 提示 1 状态（关闭）

提示 2 内容：

*   `000010__` - 提示 2 类型（电池低）
*   `______01` - 提示 2 状态 (OFF)

提示 3 内容：

*   `000011__` - 提示 3 类型 (ANC\_ON)
*   `______00` - 提示 3 状态 (ON)

### 0x67 设置启用的语音提示

命令 ID: 0x67

此消息允许设置设备的启用语音提示。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 启用语音提示载荷。 | 设置启用的语音提示。移动→设备 |
| RESPONSE | 启用语音提示负载。 | 启用语音提示设置成功。响应负载是实际应用的数据。设备→移动设备 |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→移动设备 |

查看 0x66 获取启用的语音提示，了解启用的语音提示负载规范。

COMMAND 请求中应仅包含打算更改的配置。在这种情况下，RESPONSE 负载应仅响应 COMMAND 请求中更改的语音提示。

设置启用的语音提示时应使用与获取启用的语音提示相同的同一语音提示类型 ID 版本。

### 0x57 获取语音提示音量级别

命令 ID: 0x57

默认值: 设备的最大音量级别。

此消息允许获取当前语音提示的音量级别。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前语音提示音量级别。Mobile→设备 |
| RESPONSE | 语音提示音量负载。 | COMMAND 命令成功响应。设备→移动设备 |
| ERROR | 错误负载 | COMMAND 命令错误响应。设备→移动设备 |

耳机语音提示音量负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 左耳塞语音提示音量级别。 |
| 1 | uint8 | 右耳塞语音提示音量级别。 |

耳机语音提示音量负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 语音提示音量级别。 |

音量级别范围应根据设备协商确定。

### 0x58 设置语音提示音量级别

命令 ID: 0x58

此消息允许设置当前语音提示音量级别。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 语音提示音量数据包。 | 设置语音提示音量级别。Mobile→设备 |
| RESPONSE | 语音提示音量数据包。 | 语音提示音量级别设置成功。响应负载是实际应用的数据。Device→mobile |
| ERROR | 错误负载 | COMMAND 的错误响应。Device→mobile |

请参见 0x57 获取语音提示音量级别 以获取语音提示音量负载的规范。

### 0x60 获取 ANC 模式

命令 ID：0x60

默认值：关闭

此消息可用于获取设备当前的 ANC 模式。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前 ANC 模式。Mobile→device |
| RESPONSE | ANC 模式数据包。 | COMMAND 操作成功响应。Device→mobile |
| ERROR | 错误数据包 | COMMAND 的错误响应。设备→移动 |
| NOTIFICATION | 主动降噪模式的数据包。 | 无论在应用之外（例如通过耳机上的触控手势）更改主动降噪模式时，设备→移动的通知。 |

主动降噪模式的数据包：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | ANC 模式枚举值。 |

ANC 模式枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | OFF | ANC 已关闭。 |
| 0x01 | TRANSPARENCY | 透明模式下的 ANC 开启。 |
| 0x02 | ON | ANC 已开启。 |

### 0x61 设置 ANC 模式

命令 ID: 0x61

此消息允许设置设备当前的 ANC 模式。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | ANC 模式负载。 | 设置 ANC 模式。移动设备→设备 |
| RESPONSE | ANC 模式负载。 | ANC 模式设置成功。响应负载是实际应用的数据。设备→手机 |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→手机 |

请参见 0x60 获取 ANC 模式以获取 ANC 模式负载规范。

### 0x30 获取非自适应 ANC 级别

命令 ID：0x30

默认值：设备允许值范围的中间值。

此消息允许获取设备当前的非自适应 ANC 级别。

如果设备不支持自适应 ANC 模式，该命令就是“ANC 级别”。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前非自适应 ANC 级别。移动设备→设备 |
| RESPONSE | ANC 级别数据包。 | COMMAND 操作成功响应。设备→移动设备 |
| ERROR | 错误负载 | COMMAND 的错误响应：设备→移动设备 |

ANC 级别负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | ANC 级别值。数值越大，ANC 效果越强。 |

ANC 值范围应根据设备进行协商。

### 0x31 设置非自适应 ANC 级别

命令 ID：0x31

此消息允许设置设备当前的非自适应 ANC 级别。

| 数据包类型 | 负载 | 注释 |
| --- | --- | --- |
| COMMAND | ANC 级别负载。 | 设置非自适应 ANC 级别。Mobile→device |
| RESPONSE | ANC 级别载荷。 | 非自适应 ANC 级别设置成功。响应载荷是实际应用的数据。Device→mobile |
| ERROR | 错误载荷 | COMMAND 的错误响应：设备→移动设备 |

请参见 0x30 获取非自适应 ANC 级别以获取 ANC 级别负载规范。

### 0x32 获取 ANC 透明增益

命令 ID：0x32

默认值：设备允许值范围的中间值

此消息允许获取设备当前的 ANC 透明度增益。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前 ANC 透明度增益。Mobile→设备 |
| RESPONSE | ANC 透明度增益负载。 | COMMAND 的成功响应。设备→移动设备 |
| ERROR | 错误载荷 | COMMAND 的错误响应。设备→移动设备 |

ANC 透明增益载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | ANC 透明度增益值。数值越大 = 透明度增益越高。 |

增益值范围应根据设备协商确定。

### 0x33 设置 ANC 透明度增益

命令 ID: 0x33

此消息用于设置设备当前的 ANC 透明度增益。

| 报文类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | ANC 透明度增益数据包。 | 设置 ANC 透明度增益。移动设备→设备 |
| RESPONSE | ANC 透明度增益数据包。 | 设置 ANC 透明度增益成功。响应数据包是实际应用的数据。设备→移动设备 |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→移动设备 |

请参见 0x32 获取 ANC 透明度增益，了解 ANC 透明度增益负载规范。

### 0x34 获取 ANC 风噪声检测模式

命令 ID: 0x34

默认值: OFF

此消息可用于获取设备当前的 ANC 风噪检测模式。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前 ANC 风噪检测模式。Mobile→device |
| RESPONSE | 移动设备风噪检测载荷。 | COMMAND. 设备→移动设备成功响应 |
| ERROR | 错误载荷 | COMMAND. 设备→移动设备错误响应 |

移动设备风噪检测载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | ANC 风噪声检测模式。 |

ANC 风噪声检测模式枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | ON |  |
| 0x01 | OFF |  |

### 0x35 设置 ANC 风噪检测模式

命令 ID: 0x35

此消息允许设置设备当前的 ANC 风噪检测模式。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | ANC 风噪检测负载。 | 设置 ANC 风噪检测模式。Mobile→设备 |
| RESPONSE | ANC 风噪声检测载荷。 | ANC 风噪声检测模式设置成功。响应载荷是实际应用的数据。设备→手机 |
| ERROR | 错误载荷 | COMMAND 响应错误。设备→手机 |

查看 0x84 获取 ANC 风噪声检测模式的数据包规范。

### 0x36 获取自适应 ANC 级别

命令 ID：0x36

默认值：MIDDLE

此消息用于获取设备当前的自适应 ANC 级别。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前自适应 ANC 级别。移动设备→设备 |
| RESPONSE | 自适应 ANC 级别负载。 | COMMAND 命令成功响应。设备→移动设备 |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→移动设备 |
| NOTIFICATION | 自适应 ANC 级别负载。 | 当 ANC 模式设置为自适应时，每有 ANC 级别变化，设备→移动设备通知 %% |

自适应 ANC 等级负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 自适应 ANC 等级枚举。 |

自适应 ANC 等级枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | HIGH |  |
| 0x01 | MIDDLE |  |
| 0x02 | LOW |  |

### 0x37 获取 ANC 开启模式

命令 ID: 0x37

默认值: ADAPTIVE

此消息用于获取当前 ANC 模式是自适应模式还是非自适应模式。只有当 ANC 模式开启时，此值才有效。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前 ANC 模式。Mobile→device |
| RESPONSE | ANC 模式数据包。 | COMMAND 操作成功响应。Device→mobile |
| ERROR | 错误负载 | COMMAND 指令的错误响应。设备→移动设备 |
| NOTIFICATION | ANC 开启模式负载。 | 无论 ANC 开启模式是否改变，设备→移动设备通知。 |

激活模式载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | ANC 开关模式枚举。 |

ANC 开关模式枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | NON\_ADAPTIVE |  |
| 0x01 | ADAPTIVE |  |

### 0x38 开启 ANC 模式

命令 ID: 0x38

此消息允许设置当前 ANC 模式是自适应模式还是非自适应模式。此值仅在 ANC 模式开启时有效。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | ANC 在载荷模式。 | 设置 ANC 模式。Mobile→设备 |
| RESPONSE | ANC 在模式下载荷。 | ANC 在模式设置成功。响应载荷是实际应用的数据。设备→手机 |
| ERROR | 错误载荷 | COMMAND 的错误响应。设备→手机 |

查看 0x37 获取 ANC 开启模式，了解 ANC 开启模式的数据包规范。

### 0x62 获取低延迟模式

命令 ID：0x62

默认值：NORMAL

此消息用于获取设备当前的低延迟模式设置。

| 报文类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前低延迟模式。移动设备→设备 |
| RESPONSE | 低延迟模式负载。 | COMMAND 操作成功响应。设备→移动设备 |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→移动设备 |
| NOTIFICATION | 低延迟模式负载。 | 无论在应用外通过触控耳塞手势如何改变低延迟模式，都会触发设备→移动设备通知。 |

低延迟模式负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 低延迟模式枚举值。 |

低延迟模式枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | NORMAL | 低延迟模式已关闭。 |
| 0x01 | GAME\_MODE | 低延迟模式已开启。耳机已优化用于游戏。 |

### 0x63 设置低延迟模式

命令 ID: 0x63

此消息用于设置设备当前的低延迟模式设置。

| 报文类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 低延迟模式负载。 | 设置低延迟模式。移动设备→设备 |
| RESPONSE | 低延迟模式负载。 | 低延迟设置成功。响应负载是实际应用的数据。设备→移动设备 |
| ERROR | 错误负载 | COMMAND. 设备→移动设备的错误响应 |

请参见 0x62 获取低延迟模式，了解低延迟模式负载的规范。

### 0x64 获取佩戴检测配置

命令 ID: 0x64

默认值:

*   AUTO\_PAUSE\_PLAY\_MUSIC: 开启
*   AUTO\_PAUSE\_MUSIC: 开启
*   AUTO\_PLAY\_MUSIC: 开启
*   AUTO\_HANG\_UP\_CALL: 关闭
*   AUTO\_DISABLE\_TOUCHPAD: 开启
*   AUTO\_ANC\_ON\_OFF: 开启
*   AUTO\_FUNCTIONS\_ON\_OFF: 开启

这条消息可以获取设备当前的佩戴检测配置。这代表了设备可能会根据佩戴情况设置的一些配置，例如当耳塞从耳朵取出时暂停音乐，或者当耳塞未佩戴时禁用某些功能。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前穿着检测配置。Mobile→设备 |
| RESPONSE | 佩戴检测载荷。 | COMMAND. 设备→移动设备 响应成功 |
| ERROR | 错误载荷 | COMMAND. 设备→移动设备 响应错误 |

佩戴检测载荷:

| 位索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-5 | 6 位无符号整数 | 第一种佩戴检测类型的 ID |
| 6-7 | 2 位无符号整数 | 第一种佩戴检测类型的启用状态枚举 |
| 8-13 | 6 位无符号整数 | 第二佩戴检测类型的 ID |
| 14-15 | 2 位无符号整数 | 第二佩戴检测类型的启用状态枚举 |
| ... | ... | ... |
| (N-1)\*8 到 (N-1)\*8+5 | uint 6 位 | 第 N 种穿戴检测类型的 ID |
| (N-1)\*8+6 到 (N-1)\*8+7 | 2 位无符号整数 | 第 N 种佩戴检测类型的启用状态枚举 |

佩戴检测类型：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | AUTO\_PAUSE\_PLAY\_MUSIC | 自动在耳机移出耳朵时暂停音乐。设备也可能支持在将耳机放回耳朵时继续播放音乐。 |
| 0x01 | AUTO\_HANG\_UP\_CALL | 自动挂断远离耳朵的电话。设备也可能支持在耳机放回耳朵时接听电话。 |
| 0x02 | AUTO\_DISABLE\_TOUCHPAD | 自动在外置耳朵时禁用触控板。 |
| 0x03 | AUTO\_PAUSE\_MUSIC | 自动耳机外出时暂停音乐。AUTO\_PAUSE\_PLAY\_MUSIC 的变体，具有单独的暂停和恢复动作。 |
| 0x04 | AUTO\_PLAY\_MUSIC | 自动耳机佩戴时恢复音乐。AUTO\_PAUSE\_PLAY\_MUSIC 的变体，具有单独的暂停和恢复动作。 |
| 0x05 | AUTO\_FUNCTIONS\_ON\_OFF | 启用或禁用所有自动佩戴检测功能。 |
| 0x06 | AUTO\_ANC\_ON\_OFF | 当设备检测到脱离耳部时自动禁用 ANC，在耳部插入时（如果 ANC 功能已启用）自动启用 ANC。 |

佩戴检测状态值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | ON |  |
| 0x01 | OFF |  |
| 0x02 |  | 保留 |
| 0x03 |  | 保留 |

设备应返回所有受支持的配置。不受支持的配置不应包含在响应中。

示例：

考虑二进制负载 `00000001 00000101 00001000` 。在此负载中，从左到右：

*   `00000001` - 第 0 项内容
*   `00000101` - 第 1 项内容
*   `00001000` - 第 2 项内容

项 0 内容:

*   `000000__` - 检测类型 0（自动暂停音乐）
*   `______01` - 类型 0 的佩戴检测状态（关闭）

项 1 内容:

*   `000001__` - 检测类型 1（自动挂断电话）
*   `______01` - 检测类型 1 的佩戴状态（关闭）

Item 2 内容：

*   `000010__` - 检测类型 2（自动禁用触控板）
*   `______00` - 类型 2 的佩戴检测状态（开启）

### 0x65 设置佩戴检测配置

命令 ID: 0x65

此消息允许在设备上设置当前的佩戴检测配置。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 佩戴检测负载 | 设置佩戴检测配置。Mobile→device |
| RESPONSE | 佩戴检测负载。 | 佩戴检测配置设置成功。响应负载是实际应用的数据。Device→mobile |
| ERROR | 错误负载 | COMMAND 操作返回错误响应。设备→移动设备 |

请参阅 0x64 获取佩戴检测配置以获取佩戴检测负载规范。

COMMAND 请求中只能包含打算更改的配置。在这种情况下，RESPONSE 负载应仅响应 COMMAND 请求中包含的佩戴检测类型。

### 0x68 获取 LED 亮度

Command ID: 0x68

默认值: BRIGHT。

此消息可用于获取设备当前的 LED 亮度设置。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前 LED 亮度设置。Mobile→设备 |
| RESPONSE | LED 亮度数据载荷。 | COMMAND 命令成功响应。设备→手机 |
| ERROR | 错误数据载荷 | COMMAND 命令错误响应。设备→手机 |

LED 亮度载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | LED 亮度枚举值。 |

LED 亮度枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | VERY\_DARK | 夜间使用 |
| 0x01 | MODERATE |  |
| 0x02 | BRIGHT | 在明亮环境/阳光下 |

### 0x69 设置 LED 亮度

命令 ID: 0x69

此消息允许设置设备当前的 LED 亮度设置。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | LED 亮度载荷。 | 设置 LED 亮度设置。移动设备→设备 |
| RESPONSE | LED 亮度载荷。 | LED 亮度设置更改成功。响应负载是实际应用的数据。设备→手机 |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→手机 |

请参见 0x68 获取 LED 亮度以获取 LED 亮度负载规范。

### 0x70 获取侧音模式

命令 ID: 0x70

默认值: 关

此消息允许获取设备当前的侧音模式设置。

| 包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空的。 | 获取当前侧音模式设置。Mobile→device |
| RESPONSE | 侧音模式负载。 | COMMAND 指令成功响应。Device→mobile |
| NOTIFICATION | 侧音模式负载。 | 设备→移动通知，每当侧音变化时。 |
| ERROR | 错误载荷 | COMMAND 的错误响应，设备→移动 |

侧音模式载荷：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 侧音模式值。 |

侧音模式枚举值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | ON |  |
| 0x01 | OFF |  |

### 0x71 设置侧音模式

命令 ID: 0x71

此消息允许设置设备当前的侧音模式设置。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 侧音模式负载。 | 设置侧音模式设置。移动→设备 |
| RESPONSE | 侧音模式负载。 | 侧音模式设置成功。响应负载是实际应用的数据。设备→手机 |
| ERROR | 错误负载 | 命令的错误响应。设备→手机 |

请参见 0x70 获取侧音模式以获取侧音模式负载规范。

### 0x72 获取侧音增益

命令 ID: 0x72

默认值: 设备允许值范围的中间值。

此消息允许获取设备当前的侧音增益设置。

| 包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前侧音增益设置。Mobile→device |
| RESPONSE | 侧音增益数据包。 | COMMAND 指令成功响应。Device→mobile |
| ERROR | 错误数据包 | 错误响应：COMMAND。设备→移动 |

侧音增益负载：

| 字节索引： | 类型： | 描述 |
| --- | --- | --- |
| 0 | uint8 | 侧音增益值。数值越大 = 增益越大。 |

增益值范围应根据设备协商确定。

### 0x73 设置侧音增益

命令 ID: 0x73

此消息允许设置设备当前的侧音增益设置。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 侧音增益载荷。 | 设置侧音增益设置。移动→设备 |
| RESPONSE | 侧音增益负载。 | 侧音增益设置更改成功。响应负载是实际应用的数据。设备→手机 |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→手机 |

查看 0x72 获取侧音增益，了解侧音增益负载规范。

### 0x7C 获取杜比全景声配置

命令 ID：0x7C

默认值：关闭

此消息用于检查设备上是否启用了 Dolby Atmos 功能。

| 报文类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前 Dolby Atmos 配置。Mobile→device |
| RESPONSE | Dolby Atmos 配置数据包。 | COMMAND 命令成功响应。Device→mobile |
| ERROR | 错误负载 | COMMAND 的错误响应：设备→移动设备 |

Dolby Atmos 配置负载：

| 位索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-5 | uint 6 位 | 第一个 Dolby Atmos 功能的 ID |
| 6-7 | 2 位无符号整数 | 第一项功能的启用状态枚举 |
| 8-13 | 6 位无符号整数 | 第二项 Dolby Atmos 功能的 ID |
| 14-15 | uint 2 位 | 第二功能使能状态枚举 |
| ... | ... | ... |
| (N-1)\*8 至 (N-1)\*8+5 | uint 6 位 | 第 N 个 Dolby Atmos 功能的 ID |
| (N-1)\*8+6 至 (N-1)\*8+7 | uint 2 位 | 第 N 个功能的启用状态枚举 |

Dolby Atmos 特征类型 ID：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | STEREO\_VIRTUALIZER | 是否启用或禁用立体声虚拟器（属于杜比全景声的一部分）。 |
| 0x01 | HEAD\_TRACKER | 是否启用或禁用头部追踪（属于杜比全景声的一部分）。 |

type HEAD\_TRACKER 的启用状态值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | OFF | 功能关闭 |
| 0x01 | ON | 功能开启 |

STEREO\_VIRTUALIZER 类型启用的状态值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | OFF | 立体声虚拟化关闭：移动设备 <-> 设备 |
| 0x01 | ON | 立体声虚拟化开启：非 DAX 移动设备 <-> 设备 |
| 0x02 | ON\_DAX | 仅房间模拟：DAX 移动设备 <-> 设备 |

示例：

考虑二进制负载 `00000010 00000101` 。在这个负载中，从左到右：

*   `00000010` - 第 0 项内容
*   `00000101` - 第 1 项内容

第 0 项内容:

*   `000000__` - Dolby Atmos 特性类型 0（STEREO\_VIRTUALIZER）
*   `______10` - type 0 的 Dolby Atmos 功能状态（开启）

Item 1 内容：

*   `000001__` - Dolby Atmos 功能类型 1（HEAD\_TRACKER）
*   `______01` - type 1 的 Dolby Atmos 功能状态（开启）

### 0x7D 设置杜比全景声配置

命令 ID: 0x7D

此消息允许设置设备上是否启用杜比全景声功能。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | Dolby Atmos 配置负载。 | 设置 Dolby Atmos 配置。移动→设备 |
| RESPONSE | Dolby Atmos 配置数据包。 | Dolby Atmos 配置设置成功。响应数据包是实际应用的数据。设备→移动设备 |
| ERROR | 错误数据包 | COMMAND 命令的错误响应。设备→移动设备 |

查看 0x7C 获取杜比全景声配置，以获取杜比全景声配置负载规范。

### 0x7E 获取音频编解码器配置

命令 ID：0x7E

默认值：全部启用。

此消息用于获取设备当前的音频编解码器配置。

| 报文类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空。 | 获取当前音频编解码器配置。Mobile→device |
| RESPONSE | 音频编解码器负载。 | COMMAND 请求成功响应。Device→mobile |
| ERROR | 错误负载 | COMMAND 的错误响应：设备→移动 |

音频编解码器负载：

| 位索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-5 | uint 6 bits | 音频编解码器类型的 ID |
| 6-7 | 2 位无符号整数 | 第一种音频编解码器类型的状态枚举 |
| 8-13 | 6 位无符号整数 | 第二种音频编解码器类型的 ID |
| 14-15 | uint 2 位 | 第二音频编解码器类型使能状态枚举 |
| ... | ... | ... |
| (N-1)\*8 至 (N-1)\*8+5 | uint 6 位 | 第 N 个音频编解码器类型 ID |
| (N-1)\*8+6 至 (N-1)\*8+7 | uint 2 位 | 第 N 个音频编解码器类型使能状态枚举 |

音频编解码器类型：

| Value | Name | Description |
| --- | --- | --- |
| 0x00 | LDAC |  |

启用状态值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | ON |  |
| 0x01 | OFF |  |
| 0x02 |  | 保留 |
| 0x03 |  | 保留 |

设备应返回所有受支持的配置。不受支持的配置不应包含在响应中。

示例：

考虑二进制负载 `00000001` 。在此负载从左到右：

*   `00000001` - 第 0 项内容

第 0 项内容：

*   `000000__` - 音频编解码器类型 0（LDAC）
*   `______01` - 类型 0 的音频编解码器状态（关闭）

### 0x7F 设置音频编解码器配置

命令 ID: 0x7F

此消息允许设置设备当前的音频编解码器配置。

| 数据包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 音频编解码器负载。 | 设置音频编解码器配置。移动设备→设备 |
| RESPONSE | 音频编解码器负载。 | 音频编解码器配置设置成功。响应负载是实际应用的数据。设备→移动设备 |
| ERROR | 错误负载 | COMMAND 的错误响应。设备→移动设备 |

查看 0x7E 获取音频编解码器配置，了解音频编解码器负载规范。

请求中的 COMMAND 只能包含打算更改的配置。在这种情况下，响应中的 PAYLOAD 应仅包含 COMMAND 请求中的音频编解码器类型。

### 0x5D 厂商重置

命令 ID：0x5D

此消息可对设备进行工厂复位。

| 报文类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 空 | 执行工厂复位。Mobile→device |

### 0x20 获取使用统计

命令 ID: 0x20

这条消息用于获取设备的所有统计信息，以便进行分析。

| 数据包类型 | 载荷 | 备注 |
| --- | --- | --- |
| COMMAND | 统计数据请求负载。 | 获取统计数据。移动设备→设备 |
| RESPONSE | 统计数据响应负载。 | COMMAND 操作成功响应。设备→移动设备 |
| ERROR | 错误负载 | COMMAND 的错误响应：设备→移动 |

统计数据请求负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 索引。此值可用于将大包分割成多个批次。 |

统计响应负载由一个可变长度项的数组组成：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 从 0 到 S | 统计项 | 统计项 1。 |
| 从 S+1 到 K | 统计数据项 | 统计数据项 2。 |
| (K+1) 到 M | 统计数据项 | 统计项 3。 |
| ... | ... | ... |

在上述负载表中，S、K 和 M 用于表示每个统计项结束的字节索引。

这些项可以任意排序，如果设备不支持特定的项类型，这些项可以缺失。如果移动设备不支持特定的项类型，应忽略该项。

每个统计项：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 统计项类型。 |
| 1 | uint8 | 统计项内容长度（不包括类型和长度字节）。N |
| 2 到(N+1) | 可变长度二进制 | 统计项内容。 |

统计项内容取决于项的类型并且是动态的。所有统计项类型及其内容在 6. 统计项类型 中有描述。

统计载荷结构的通用示例：

考虑载荷 `0x00 04 00 00 10 E0 07 01 10 09 05 01 00 03 B8 C0` 。在此载荷中：

| 字节索引 | 值 | 描述 |
| --- | --- | --- |
| 0 | 0x00 | 统计项 1 的类型。 |
| 1 | 0x04 | 统计项 1 的长度。 |
| 2 到 5 | 0x00 00 10 E0 | Statistics item 1 的内容。 |
| 6 | 0x07 | 统计项 2 的类型。 |
| 7 | 0x01 | 统计项 2 的长度。 |
| 8 | 0x10 | 统计项 2 的内容。 |
| 9 | 0x09 | 统计项 3 的类型。 |
| 10 | 0x05 | 统计项 3 的长度。 |
| 11 到 15 | 0x01 00 03 B8 C0 | 统计项 3 的内容。 |

请注意，这只是用于展示结构的通用示例。实际的统计项类型及其内容在第 6 章“统计项类型”中描述。

### 0x21 重置使用统计

命令 ID：0x21

此消息允许将设备上的所有使用统计重置为初始值。

| 包类型 | 负载 | 备注 |
| --- | --- | --- |
| COMMAND | 空的 | 重置使用统计。移动→设备 |
| RESPONSE | 空 | 使用统计已成功重置。设备→移动 |
| ERROR | 错误负载 | 错误响应：COMMAND。设备→移动 |

### 错误载荷

这是一般错误载荷，适用于 ERROR 数据包类型。

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 错误状态枚举 |

错误状态枚举：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | FEATURE\_NOT\_SUPPORTED | 指定的功能 ID 无效。 |
| 0x01 | NOTIFICATION | 指定的命令 ID 无效。 |
| 0x02 | NOT\_AUTHENTICATED | 主机未经过身份验证，无法使用命令 ID 或进行控制。 |
| 0x03 | INSUFFICIENT\_RESOURCES | 命令有效，但设备无法成功执行该命令。 |
| 0x04 | AUTHENTICATING | 设备正在验证主机。 |
| 0x05 | INVALID\_PARAMETER | 命令中使用了无效参数。 |
| 0x06 | INCORRECT\_STATE | 设备当前状态无法处理该命令。 |
| 0x07 | IN\_PROGRESS | 命令正在处理中。 |
| 其他 | FEATURE\_SPECIFIC | 特定于命令或功能 ID 的错误。 |

## 4\. 软件空中下载更新（FOTA）

FOTA 的实现非常依赖于设备的芯片组，因此需要针对不同的平台进行定制。

对于以下平台的 OTA 解决方案，我们仍然采用该协议的通信协议头：

*   武器平台 IAP2
*   BES 平台 SPP 和 BLE

OTA 包格式几乎与 2.1. RFCOMM 协议定义中的格式相同，仅消息头略有不同，如 2.2.1. 消息头所示。

| 参数 | 大小 | 描述 |
| --- | --- | --- |
| SOF 标志 | 8 位 | 这是一个常量 0xFF 值。用于标识新消息的开始。 |
| 版本 | 8 位 | 协议版本。当前版本是 4。 |
| 标志 | 8 位 | 用于交换元数据的位字段。 |
| 负载长度 | 8 或 16 位 | 消息负载的字节数。8 位或 16 位长度由一个标志控制。 |
| 厂商 ID | 16 位 | 常量 0x2E50 |
| 特性 ID | 7 位 | 常量 0x06 用于 OTA。 |
| 保留 | 1 位 | 0x0 |

你可以将 beyerdynamic 协议视为一个通道，而芯片平台的 OTA 包则封装在这个通道中。

## 5\. 示例包流

以下是一个示例包流，用于从手机获取耳塞的电池电量。

注意：这只是一个消息示例。请参阅第 3 节 消息定义 以了解支持的消息类型及其负载。

#### 5.1. GetBatteryLevel 命令

![](assets/GetBatteryLevel-success.png)

移动设备可以在任何时间向耳塞发送 GetBatteryLevel COMMAND 消息以请求耳塞的电池电量。当移动设备连接到产品并需要确定当前电池电量和已连接的耳塞时，可以使用此功能。

一旦耳塞接收到 GetBatteryLevel COMMAND 消息，它们应该返回一个包含当前电池电量状态的 GetBatteryLevel RESPONSE 消息。

如果处理 COMMAND 消息时出现任何错误，耳塞应返回一个 GetBatteryLevel ERROR 消息：

![](assets/GetBatteryLevel-error.png)

移动设备端有一个超时时间，用于等待响应。如果耳塞在超时时间内没有响应，移动设备端将假设该命令失败，并可能会重试该命令。

#### 5.2. 获取电池电量变更通知

![](assets/GetBatteryLevel-changed.png)

如果耳塞的电池电量发生变化，耳塞应向移动设备端发送一个 GetBatteryLevel 通知消息。移动设备端不会使用周期性轮询来确定电池电量何时发生变化。

#### 5.3. 耳塞断开连接时的获取电池电量通知

![](assets/GetBatteryLevel-earbud-disconnected.png)

与 5.2 相同。GetBatteryLevel 变更通知。当一个耳塞断开连接或连接时，耳塞应发送一个 GetBatteryLevel 通知消息。

手机端使用 GetBatteryLevel 命令来确定已连接的耳塞，因此需要知道这一状态何时发生变化。

## 6\. 统计项类型

本节描述了 0x20 Get Usage Statistics 命令的统计项类型及其内容。

### 总运行时间

此项目类型表示设备的总运行时间。

项目类型: 0x00

内容:

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | uint32 | 总运行时间为分钟。 |

### 0x01 电源开启事件

该项类型表示设备启动的次数。

项类型: 0x01

内容

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | uint32 | 开机事件计数器。 |

### 0x02 音乐播放时间

此项目类型表示设备的总音乐播放时间。

项类型: 0x02

内容:

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | uint32 | 音乐播放时长（分钟）。 |

### 0x03 通话时长

此项目类型表示使用设备的总通话时间。

项目类型: 0x03

内容:

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | uint32 | 通话时长（分钟）。 |

### 错误计数器总计

该项类型表示设备的总错误计数器。这是固件崩溃的计数器值。

项类型: 0x04

内容:

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | uint32 | 恐慌次数计数器。 |

### 已接受呼叫计数器

该项类型表示设备上的总已接受呼叫计数。

项类型: 0x05

内容

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | uint32 | 已接受的呼叫计数器。 |

### 0x06 按键按下计数器

此项目类型表示设备上的总按键按下计数器。

项类型: 0x06

内容:

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | uint32 | 按键次数计数器。 |

### 0x07 声音等级生命周期平均值

这种项目类型表示设备音量水平的生命周期平均值。

项目类型: 0x07

内容:

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | 音量级别生命周期平均值。值范围是设备的音量范围（即 0-32）。 |

### 0x08 时间多点模式使用时间

此项目类型表示设备上时间多点模式的总使用时间。

项目类型: 0x08

内容:

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | uint32 | 使用了时间多点模式。单位：分钟 |

### 0x09 使用的 ANC 模式时间

该项表示设备在每种 ANC 模式下的使用总时间。

项类型：0x09

内容是一个数组。数组中的每个项表示在特定 ANC 模式下花费的时间。

内容：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-4 | 数组项负载 | 项 1 |
| 5-9 | 数组项负载 | 项 2 |
| ... | ... | ... |

数组项负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | ANC 模式枚举值 |
| 1-4 | uint32 | 在 ANC 模式下花费的时间。分钟为单位。 |

将内容长度除以 5 以获取数组项的数量。

项可以以任何顺序出现，如果设备不支持特定的 ANC 模式，则项可以缺失。

示例：

考虑项内容 `0x00 00 00 10 E0 01 00 00 00 00 02 00 00 A8 C0` 。在该内容中：

| 字节索引 | 值 | 描述 |
| --- | --- | --- |
| 0 | 0x00 | 第一个数组项是关于 ANC 模式，值为 0x00（关闭） |
| 1-4 | 00 00 10 E0 | 在 ANC 模式关闭状态下花费的时间（从字节索引 0 开始）。 0x00 00 10 E0 = 4320 分钟（3 天）。 |
| 5 | 0x01 | 第二个数组项是关于 ANC 模式，值为 0x01（透明模式） |
| 6-9 | 00 00 00 00 | 在透明模式 TRANSPARENCY（从字节索引 5 开始）下花费的时间。0 分钟。 |
| 10 | 0x02 | 第三项数组为 ANC 模式，值为 0x02（开启） |
| 11-14 | 00 00 A8 C0 | 在 ANC 模式开启状态下所花费的时间（从字节索引 10 开始）。 0x00 00 A8 C0 = 43200 分钟（30 天）。 |

### 0x0A 低延迟模式使用时间

此项目类型表示设备在低延迟模式下使用的总时间。

项目类型: 0x0A

内容:

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-3 | uint32 | 低延迟模式下花费的时间。单位为分钟。 |

### 错误信息

此项目类型表示设备的错误信息。如果发生错误或崩溃，这将自动生成系统日志。

项目类型：0x0B

内容由一个数组组成。每个数组项由错误 ID + 计数器组成。

内容

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0-4 | 数组项负载 | 项 1 |
| 5-9 | 数组项负载 | 项 2 |
| ... | ... | ... |

数组项负载：

| 字节索引 | 类型 | 描述 |
| --- | --- | --- |
| 0 | uint8 | Error ID. |
| 1-4 | uint32 | 记录此错误发生次数的计数器。 |

将内容长度除以 5 得到数组项的数量。

项可以以任何顺序出现，如果设备未遇到特定错误，则可以跳过该项。

错误 ID 值：

| 值 | 名称 | 描述 |
| --- | --- | --- |
| 0x00 | 崩溃 | 固件已崩溃 |

示例：

考虑载荷 `0x00 00 00 00 01 80 00 43 C0 02` 。 在此载荷中：

| 字节索引 | 值 | 描述 |
| --- | --- | --- |
| 0 | 0x00 | 第一个条目描述错误 ID 0x00。 |
| 1-4 | 00 00 00 01 | 错误 ID 0x00 发生了 1 次。 |
| 5 | 0x80 | 第二项描述了错误 ID 0x80。 |
| 6-9 | 00 43 C0 02 | 错误代码 0x80 发生了 0x0043C002=4440066 次。 |

## 7\. 测试

为了验证协议的实现，您可以使用我们的调试应用来测试蓝牙连接：

### Android

#### 概述

请联系我们获取 Beyerdynamic 调试应用的下载链接。

从该链接中，安装其名称中按日期排序的最新 APK（即 `2024-05-08.apk` ）。

该应用在主屏幕启动器上有 2 个图标：

*   Beyerdynamic - 这是即将向公众发布的主应用程序。它可能还不支持您的设备。
*   BY: Debug Connection - 这是您可以用来测试连接的调试应用程序。

将它们视为同一个 APK 文件内的两个独立应用程序。

#### 连接设备

要使用调试应用连接到您的设备，请按照以下步骤操作：

1.  打开 BY: 调试连接 应用：

![Android Debug App](assets/Screenshot_20240508-205417.png)

2.  如果被要求，授予必要的权限。

现在应用应该扫描附近的蓝牙设备并在列表中显示它们。请注意，该应用仅显示通过 A2DP 和/或 HFP 个人资料连接到手机的设备。如果您的设备未出现在列表中，请确保它通过 A2DP 和/或 HFP 个人资料连接到手机。至少需要其中一个个人资料连接到手机，以便该设备出现在列表中。

![drawing](assets/Screenshot_20240508-205139.png)

一旦在列表中看到您的蓝牙设备：

1.  选择您的设备芯片组类型。这主要用于决定使用哪个 OTA 库。
2.  在芯片组类型下方检查 SPP UUID。这是应用程序将用于通过 SPP 连接设备的 UUID。如果您想连接到不同的 UUID，请点击“更改”。
3.  在列表中点击设备以连接到该设备。

现在应用应尝试通过所选 UUID 的 SPP 连接到设备。

如果连接成功，你应该会看到以下界面：

![drawing](assets/Screenshot_20240508-205700.png)

如果连接不成功，你会看到一个包含错误信息的提示消息，并会被重定向回设备列表界面。请确保使用正确的 SPP UUID，并且设备可以在该 UUID 上接受 SPP 连接，然后重新尝试。

#### 测试命令

连接到设备后，您将看到此调试应用支持的命令列表。

要发送带有特定命令 ID 的消息，请点击该命令 ID 旁边的“发送”按钮。如果命令需要额外输入，应用可能会要求您提供。

一旦收到设备对该命令 ID 的响应，该响应将在命令 ID 卡片中显示。如果解析响应时出现错误，应用将在响应位置显示错误消息。

屏幕的上半部分显示了应用与设备之间的通信日志。可以将其视为包含列：时间戳、方向、命令 ID、数据包类型和负载的表格。方向“→”表示应用向设备发送了消息，而“←”表示应用从设备接收了消息。

您可以随时通过点击命令 ID 列表顶部的“断开连接”按钮来断开与设备的连接。

> 如果您认为该应用没有正确发送或解析命令，请联系我们。我们将很乐意帮助您。

#### FOTA

调试应用还支持通过芯片组的 OTA 库进行固件的 OTA 更新。

使用 FOTA：

1.  请确保调试应用已连接到您的蓝牙设备，并且已正确指定芯片类型。
2.  在命令列表顶部点击“FOTA”按钮。
3.  选择要刷写的固件文件：

![drawing](assets/Screenshot_20240508-210639.png)

一旦选择了 OTA 文件，应用将尝试将固件刷写到设备上。应用将显示刷写过程的进度。

一旦 OTA 更新完成，应用将进入完成或失败状态。点击“关闭”按钮返回到之前的屏幕。

如果 OTA 更新过程失败，并且您认为问题出在应用方面，请尝试使用您平台的官方 FOTA 应用来验证问题。您可以在下载 BY 调试 APK 的文件夹中找到一些官方 FOTA 应用。如果 OTA 更新在官方应用中可以正常工作但在调试应用中不行，请联系我们。

#### 提取应用日志

如果在使用应用时遇到任何问题，您可以提取应用日志进行调试。操作步骤如下：

1.  在手机上打开文件系统浏览器应用。
2.  导航至：
    *   Android 10 及以上版本： `Documents/Beyerdynamic/`
    *   Android 8-9: `Android/data/com.beyerdynamic.app/files/`

在这个文件夹中你应该会看到多个日志文件。每个文件包含一个特定应用启动的日志。文件名是应用启动时的 UTC 时间。请发送你在遇到问题时应用启动对应的日志文件。

#### 将 OTA 文件复制到主用户界面应用

一旦 Beyerdynamic 主用户界面应用支持你的设备型号，你也可以使用它来测试你的设备。 %%

您也可以通过此应用查看 OTA 更新。应用程序默认会从我们的服务器下载 OTA 文件。然而，从中国访问该服务器时可能会速度较慢。

在这种情况下，您可以手动将 OTA 文件推送到应用程序存储中，跳过下载步骤。

注意：此功能仅适用于从我们提供的链接下载的调试版应用程序。如果应用程序是从 Google Play 商店下载的，或者用于测试，此功能将无法使用。

要将 OTA 文件推送到应用程序存储中：

1.  将 `adb` 安装到您的电脑上。按照此处的步骤安装 `adb` 并配置您的手机进行 USB 调试。
2.  确保您的手机上已安装调试应用。
3.  强制停止手机上的 BY 应用。
4.  在您的电脑上打开终端并运行以下命令：

```bash
adb push <Path-To-OTA-file-on-PC> /data/local/tmp/<DeviceType>-<Version>.bin
adb shell run-as com.beyerdynamic.app rm -f files/ota/<DeviceType>-<Version>.bin
adb shell run-as com.beyerdynamic.app mkdir -p files/ota
adb shell run-as com.beyerdynamic.app cp /data/local/tmp/<DeviceType>-<Version>.bin files/ota
adb shell rm /data/local/tmp/<DeviceType>-<Version>.bin
```

将 `<Path-To-OTA-file-on-PC>` 替换为您的电脑上 OTA 文件的路径。将 `<Device-Type>` 替换为在 0x00 获取设备类型 中指定的设备型号名称。将 `<Version>` 替换为在 OTA 文件存储服务器上指定的版本名称。即 `adb push /path/to/ota-file.bin /data/local/tmp/VERIO_100-1.5.0.bin` 。

有些手机可能会出现一些命令未找到或不允许的错误。在这种情况下，您可以尝试使用另一部手机。

现在，OTA 文件已推送到应用存储。您现在可以打开 BY 应用，应用应该会通知您，您的设备现在有可用的 OTA 更新。

一旦 OTA 更新完成，应用将从其存储中删除 OTA 文件，因此如果您想再次测试 OTA 更新，需要再次推送文件。